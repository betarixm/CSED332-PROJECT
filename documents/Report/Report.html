<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <title>
        Warning Plugin for Degradation of Software Metrics - HackMD
    </title>
    <link rel="icon" type="image/png" href="https://hackmd.io/favicon.png">
    <link rel="apple-touch-icon" href="https://hackmd.io/apple-touch-icon.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css" integrity="sha256-3iu9jgsy9TpTwXKb7bNQzqWekRX7pPK+2OLj3R922fo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/octicons/3.5.0/octicons.min.css" integrity="sha256-QiWfLIsCT02Sdwkogf6YMiQlj4NE84MKkzEMkZnMGdg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css" integrity="sha256-vtR0hSWRc3Tb26iuN2oZHt3KRUomwTufNIf5/4oeCyg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/css/basic/emojify.min.css" integrity="sha256-UOrvMOsSDSrW6szVLe8ZDZezBxh5IoIfgTwdNDgTjiU=" crossorigin="anonymous" />
    <style>
        @import url(https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i|Source+Code+Pro:300,400,500|Source+Sans+Pro:300,300i,400,400i,600,600i|Source+Serif+Pro&subset=latin-ext);.hljs{display:block;background:#fff;padding:.5em;color:#333;overflow-x:auto}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-string,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#a71d5d}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#0086b3}.hljs-built_in,.hljs-builtin-name{color:#005cc5}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#795da3}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.markdown-body{font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .absent{color:#c00}.markdown-body .anchor{float:left;padding-right:4px;margin-left:-20px;line-height:1}.markdown-body .anchor:focus{outline:none}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e7e7e7;border:0}.markdown-body blockquote{font-size:16px;padding:0 1em;color:#777;border-left:.25em solid #ddd}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body kbd,.popover kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#555;vertical-align:middle;background-color:#fcfcfc;border:1px solid #ccc;border-bottom-color:#bbb;border-radius:3px;box-shadow:inset 0 -1px 0 #bbb}.markdown-body .loweralpha{list-style-type:lower-alpha}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#000;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1 code,.markdown-body h1 tt,.markdown-body h2 code,.markdown-body h2 tt,.markdown-body h3 code,.markdown-body h3 tt,.markdown-body h4 code,.markdown-body h4 tt,.markdown-body h5 code,.markdown-body h5 tt,.markdown-body h6 code,.markdown-body h6 tt{font-size:inherit}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eee}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#777}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol.no-list,.markdown-body ul.no-list{padding:0;list-style-type:none}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{padding-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}.markdown-body table th{font-weight:700}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #ddd}.markdown-body table tr{background-color:#fff;border-top:1px solid #ccc}.markdown-body table tr:nth-child(2n){background-color:#f8f8f8}.markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body .emoji{max-width:none;vertical-align:text-top;background-color:transparent}.markdown-body span.frame{display:block;overflow:hidden}.markdown-body span.frame>span{display:block;float:left;width:auto;padding:7px;margin:13px 0 0;overflow:hidden;border:1px solid #ddd}.markdown-body span.frame span img{display:block;float:left}.markdown-body span.frame span span{display:block;padding:5px 0 0;clear:both;color:#333}.markdown-body span.align-center{display:block;overflow:hidden;clear:both}.markdown-body span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}.markdown-body span.align-center span img{margin:0 auto;text-align:center}.markdown-body span.align-right{display:block;overflow:hidden;clear:both}.markdown-body span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}.markdown-body span.align-right span img{margin:0;text-align:right}.markdown-body span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}.markdown-body span.float-left span{margin:13px 0 0}.markdown-body span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}.markdown-body span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}.markdown-body code,.markdown-body tt{padding:0;padding-top:.2em;padding-bottom:.2em;margin:0;font-size:85%;background-color:rgba(0,0,0,.04);border-radius:3px}.markdown-body code:after,.markdown-body code:before,.markdown-body tt:after,.markdown-body tt:before{letter-spacing:-.2em;content:"\00a0"}.markdown-body code br,.markdown-body tt br{display:none}.markdown-body del code{text-decoration:inherit}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px}.markdown-body pre code,.markdown-body pre tt{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body pre code:after,.markdown-body pre code:before,.markdown-body pre tt:after,.markdown-body pre tt:before{content:normal}.markdown-body .csv-data td,.markdown-body .csv-data th{padding:5px;overflow:hidden;font-size:12px;line-height:1;text-align:left;white-space:nowrap}.markdown-body .csv-data .blob-line-num{padding:10px 8px 9px;text-align:right;background:#fff;border:0}.markdown-body .csv-data tr{border-top:0}.markdown-body .csv-data th{font-weight:700;background:#f8f8f8;border-top:0}.news .alert .markdown-body blockquote{padding:0 0 0 40px;border:0 none}.activity-tab .news .alert .commits,.activity-tab .news .markdown-body blockquote{padding-left:0}.task-list-item{list-style-type:none}.task-list-item label{font-weight:400}.task-list-item.enabled label{cursor:pointer}.task-list-item+.task-list-item{margin-top:3px}.task-list-item-checkbox{float:left;margin:.31em 0 .2em -1.3em!important;vertical-align:middle;cursor:default!important}.markdown-body{padding-top:40px;padding-bottom:40px;max-width:758px;overflow:visible!important;position:relative}.markdown-body .emoji{vertical-align:top}.markdown-body pre{border:inherit!important}.markdown-body code{color:inherit!important}.markdown-body pre code .wrapper{display:-moz-inline-flex;display:-ms-inline-flex;display:-o-inline-flex;display:inline-flex}.markdown-body pre code .gutter{float:left;overflow:hidden;-webkit-user-select:none;user-select:none}.markdown-body pre code .gutter.linenumber{text-align:right;position:relative;display:inline-block;cursor:default;z-index:4;padding:0 8px 0 0;min-width:20px;box-sizing:content-box;color:#afafaf!important;border-right:3px solid #6ce26c!important}.markdown-body pre code .gutter.linenumber>span:before{content:attr(data-linenumber)}.markdown-body pre code .code{float:left;margin:0 0 0 16px}.markdown-body .gist .line-numbers{border-left:none;border-top:none;border-bottom:none}.markdown-body .gist .line-data{border:none}.markdown-body .gist table{border-spacing:0;border-collapse:inherit!important}.markdown-body code[data-gist-id]{background:none;padding:0}.markdown-body code[data-gist-id]:after,.markdown-body code[data-gist-id]:before{content:""}.markdown-body code[data-gist-id] .blob-num{border:unset}.markdown-body code[data-gist-id] table{overflow:unset;margin-bottom:unset}.markdown-body code[data-gist-id] table tr{background:unset}.markdown-body[dir=rtl] pre{direction:ltr}.markdown-body[dir=rtl] code{direction:ltr;unicode-bidi:embed}.markdown-body .alert>p:last-child{margin-bottom:0}.markdown-body pre.abc,.markdown-body pre.flow-chart,.markdown-body pre.graphviz,.markdown-body pre.mermaid,.markdown-body pre.sequence-diagram,.markdown-body pre.vega{text-align:center;background-color:inherit;border-radius:0;white-space:inherit;overflow:visible}.markdown-body pre.abc>code,.markdown-body pre.flow-chart>code,.markdown-body pre.graphviz>code,.markdown-body pre.mermaid>code,.markdown-body pre.sequence-diagram>code,.markdown-body pre.vega>code{text-align:left}.markdown-body pre.abc>svg,.markdown-body pre.flow-chart>svg,.markdown-body pre.graphviz>svg,.markdown-body pre.mermaid>svg,.markdown-body pre.sequence-diagram>svg,.markdown-body pre.vega>svg{max-width:100%;height:100%}.markdown-body pre>code.wrap{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.markdown-body .alert>p:last-child,.markdown-body .alert>ul:last-child{margin-bottom:0}.markdown-body summary{display:list-item}.markdown-body summary:focus{outline:none}.markdown-body details summary{cursor:pointer}.markdown-body details:not([open])>:not(summary){display:none}.markdown-body figure{margin:1em 40px}.markdown-body .mark,.markdown-body mark{background-color:#fff1a7}.vimeo,.youtube{cursor:pointer;display:table;text-align:center;background-position:50%;background-repeat:no-repeat;background-size:contain;background-color:#000;overflow:hidden}.vimeo,.youtube{position:relative;width:100%}.youtube{padding-bottom:56.25%}.vimeo img{width:100%;object-fit:contain;z-index:0}.youtube img{object-fit:cover;z-index:0}.vimeo iframe,.youtube iframe,.youtube img{width:100%;height:100%;position:absolute;top:0;left:0}.vimeo iframe,.youtube iframe{vertical-align:middle;z-index:1}.vimeo .icon,.youtube .icon{position:absolute;height:auto;width:auto;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;opacity:.3;transition:opacity .2s;z-index:0}.vimeo:hover .icon,.youtube:hover .icon{opacity:.6;transition:opacity .2s}.slideshare .inner,.speakerdeck .inner{position:relative;width:100%}.slideshare .inner iframe,.speakerdeck .inner iframe{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%}.figma{display:table;position:relative;width:100%;padding-bottom:56.25%}.figma iframe{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;border:1px solid #eee}.MJX_Assistive_MathML{display:none}#MathJax_Message{z-index:1000!important}.ui-infobar{position:relative;z-index:2;max-width:760px;margin:25px auto -25px;color:#777}.toc .invisable-node{list-style-type:none}.ui-toc{position:fixed;bottom:20px;z-index:998}.ui-toc.both-mode{margin-left:8px}.ui-toc.both-mode .ui-toc-label{height:40px;padding:10px 4px;border-top-left-radius:0;border-bottom-left-radius:0}.ui-toc-label{background-color:#e6e6e6;border:none;color:#868686;transition:opacity .2s}.ui-toc .open .ui-toc-label{opacity:1;color:#fff;transition:opacity .2s}.ui-toc-label:focus{opacity:.3;background-color:#ccc;color:#000}.ui-toc-label:hover{opacity:1;background-color:#ccc;transition:opacity .2s}.ui-toc-dropdown{margin-top:20px;margin-bottom:20px;padding-left:10px;padding-right:10px;max-width:45vw;width:25vw;max-height:70vh;overflow:auto;text-align:inherit}.ui-toc-dropdown>.toc{max-height:calc(70vh - 100px);overflow:auto}.ui-toc-dropdown[dir=rtl] .nav{padding-right:0;letter-spacing:.0029em}.ui-toc-dropdown a{overflow:hidden;text-overflow:ellipsis;white-space:pre}.ui-toc-dropdown .nav>li>a{display:block;padding:4px 20px;font-size:13px;font-weight:500;color:#767676}.ui-toc-dropdown .nav>li:first-child:last-child>ul,.ui-toc-dropdown .toc.expand ul{display:block}.ui-toc-dropdown .nav>li>a:focus,.ui-toc-dropdown .nav>li>a:hover{padding-left:19px;color:#000;text-decoration:none;background-color:transparent;border-left:1px solid #000}.ui-toc-dropdown[dir=rtl] .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav>li>a:hover{padding-right:19px;border-left:none;border-right:1px solid #000}.ui-toc-dropdown .nav>.active:focus>a,.ui-toc-dropdown .nav>.active:hover>a,.ui-toc-dropdown .nav>.active>a{padding-left:18px;font-weight:700;color:#000;background-color:transparent;border-left:2px solid #000}.ui-toc-dropdown[dir=rtl] .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav>.active>a{padding-right:18px;border-left:none;border-right:2px solid #000}.ui-toc-dropdown .nav .nav{display:none;padding-bottom:10px}.ui-toc-dropdown .nav>.active>ul{display:block}.ui-toc-dropdown .nav .nav>li>a{padding-top:1px;padding-bottom:1px;padding-left:30px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a{padding-right:30px}.ui-toc-dropdown .nav .nav>li>ul>li>a{padding-top:1px;padding-bottom:1px;padding-left:40px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a{padding-right:40px}.ui-toc-dropdown .nav .nav>li>a:focus,.ui-toc-dropdown .nav .nav>li>a:hover{padding-left:29px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:hover{padding-right:29px}.ui-toc-dropdown .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown .nav .nav>li>ul>li>a:hover{padding-left:39px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:hover{padding-right:39px}.ui-toc-dropdown .nav .nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>a{padding-left:28px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>a{padding-right:28px}.ui-toc-dropdown .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>a{padding-left:38px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>a{padding-right:38px}.markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif}html[lang^=ja] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}html .markdown-body[lang^=ja]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html .markdown-body[lang=zh-tw]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html .markdown-body[lang=zh-cn]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}html[lang^=ja] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ\ Ｐゴシック,sans-serif}html[lang=zh-tw] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html[lang=zh-cn] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}html .ui-toc-dropdown[lang^=ja]{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ\ Ｐゴシック,sans-serif}html .ui-toc-dropdown[lang=zh-tw]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html .ui-toc-dropdown[lang=zh-cn]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}.ui-affix-toc{position:fixed;top:0;max-width:15vw;max-height:70vh;overflow:auto}.back-to-top,.expand-toggle,.go-to-bottom{display:block;padding:4px 10px;margin-top:10px;margin-left:10px;font-size:12px;font-weight:500;color:#999}.back-to-top:focus,.back-to-top:hover,.expand-toggle:focus,.expand-toggle:hover,.go-to-bottom:focus,.go-to-bottom:hover{color:#563d7c;text-decoration:none}.back-to-top,.go-to-bottom{margin-top:0}.ui-user-icon{width:20px;height:20px;display:block;border-radius:50%;margin-top:2px;margin-bottom:2px;margin-right:5px;background-position:50%;background-repeat:no-repeat;background-size:cover}.ui-user-icon.small{width:18px;height:18px;display:inline-block;vertical-align:middle;margin:0 0 .2em}.ui-infobar>small>span{line-height:22px}.ui-infobar>small .dropdown{display:inline-block}.ui-infobar>small .dropdown a:focus,.ui-infobar>small .dropdown a:hover{text-decoration:none}.ui-more-info{color:#888;cursor:pointer;vertical-align:middle}.ui-more-info .fa{font-size:16px}.ui-connectedGithub,.ui-published-note{color:#888}.ui-connectedGithub{line-height:23px;white-space:nowrap}.ui-connectedGithub a.file-path{color:#888;text-decoration:none;padding-left:22px}.ui-connectedGithub a.file-path:active,.ui-connectedGithub a.file-path:hover{color:#888;text-decoration:underline}.ui-connectedGithub .fa{font-size:20px}.ui-published-note .fa{font-size:20px;vertical-align:top}.unselectable{-webkit-user-select:none;-o-user-select:none;user-select:none}.selectable{-webkit-user-select:text;-o-user-select:text;user-select:text}@media print{blockquote,div,img,pre,table{page-break-inside:avoid!important}a[href]:after{font-size:12px!important}}.markdown-body.slides{position:relative;z-index:1;color:#222}.markdown-body.slides:before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;background-color:currentColor;box-shadow:0 0 0 50vw}.markdown-body.slides section[data-markdown]{position:relative;margin-bottom:1.5em;background-color:#fff;text-align:center}.markdown-body.slides section[data-markdown] code{text-align:left}.markdown-body.slides section[data-markdown]:before{content:"";display:block;padding-bottom:56.23%}.markdown-body.slides section[data-markdown]>div:first-child{position:absolute;top:50%;left:1em;right:1em;transform:translateY(-50%);max-height:100%;overflow:hidden}.markdown-body.slides section[data-markdown]>ul{display:inline-block}.markdown-body.slides>section>section+section:after{content:"";position:absolute;top:-1.5em;right:1em;height:1.5em;border:3px solid #777}.site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,sans-serif}html[lang^=ja] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}body{font-smoothing:subpixel-antialiased!important;-webkit-font-smoothing:subpixel-antialiased!important;-moz-osx-font-smoothing:auto!important;text-shadow:0 0 1em transparent,1px 1px 1.2px rgba(0,0,0,.004);-webkit-overflow-scrolling:touch;letter-spacing:.025em;font-family:Source Sans Pro,Helvetica,Arial,sans-serif}html[lang^=ja] body{font-family:Source Sans Pro,Helvetica,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}abbr[data-original-title],abbr[title]{cursor:help}body.modal-open{overflow-y:auto;padding-right:0!important}
    </style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js" integrity="sha256-g6iAfvZp+nDQ2TdTR/VVKJf3bGro4ub5fvWSWVRi2NE=" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js" integrity="sha256-8E4Is26QH0bD52WoQpcB+R/tcWQtpzlCojrybUd7Mxo=" crossorigin="anonymous"></script>
    <![endif]-->
</head>

<body>
    <div id="doc" class="markdown-body container-fluid comment-inner comment-enabled" data-hard-breaks="true"><h1 id="Warning-Plugin-for-Degradation-of-Software-Metrics" data-id="Warning-Plugin-for-Degradation-of-Software-Metrics"><a class="anchor hidden-xs" href="#Warning-Plugin-for-Degradation-of-Software-Metrics" title="Warning-Plugin-for-Degradation-of-Software-Metrics"><span class="octicon octicon-link"></span></a><span>Warning Plugin for Degradation of Software Metrics</span></h1><p><a href="https://www.postech.ac.kr" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/CSED332-POSTECH-c80150" alt="CSED332@POSTECH" loading="lazy"></a><span> </span><a href="https://www.postech.ac.kr/eng" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Fall-2021-775E64" alt="CSED332@POSTECH" loading="lazy"></a></p><p><strong><span>Team 2</span></strong><span> ─ Choi Eunsue </span><sub><span>@ches7283</span></sub><span>, Hanna Mueller </span><sub><span>@hmueller</span></sub><span>, Gwon Minjae </span><sub><span>@mzg00</span></sub><span>, Gong Minsu </span><sub><span>@gongms</span></sub><span>, Noémie Jacquemot </span><sub><span>@njacquemot</span></sub><span>, Park Subin </span><sub><span>@parksbn812</span></sub><span>, Kim Namgeon </span><sub><span>@namgeon1106</span></sub></p><h2 id="1-Description" data-id="1-Description"><a class="anchor hidden-xs" href="#1-Description" title="1-Description"><span class="octicon octicon-link"></span></a><span>1. Description</span></h2><h3 id="11-Goal" data-id="11-Goal"><a class="anchor hidden-xs" href="#11-Goal" title="11-Goal"><span class="octicon octicon-link"></span></a><span>1.1. Goal</span></h3><p><span>The goal of our project is to warn the user if software metrics of their project degrade or worsen, and to show them which method was the cause of it.</span></p><h3 id="12-Problem-and-Solution" data-id="12-Problem-and-Solution"><a class="anchor hidden-xs" href="#12-Problem-and-Solution" title="12-Problem-and-Solution"><span class="octicon octicon-link"></span></a><span>1.2. Problem and Solution</span></h3><p><span>While developing software one might focus more on implementing a feature than spending time to make the code easily understandable.</span><br>
<span>This plugin supports developers by computing the cyclomatic complexity and Halstead metrics per method. If a certain threshold of those metric values is exceeded, the user receives a warning and can check, which methods in what class are exceedings those thresholds. They can then easily navigate to that method in order to validate if that method could be improved.</span></p><h2 id="2-Architecture-and-Design" data-id="2-Architecture-and-Design"><a class="anchor hidden-xs" href="#2-Architecture-and-Design" title="2-Architecture-and-Design"><span class="octicon octicon-link"></span></a><span>2. Architecture and Design</span></h2><h3 id="21-Database" data-id="21-Database"><a class="anchor hidden-xs" href="#21-Database" title="21-Database"><span class="octicon octicon-link"></span></a><span>2.1. Database</span></h3><h4 id="211-Environment" data-id="211-Environment"><a class="anchor hidden-xs" href="#211-Environment" title="211-Environment"><span class="octicon octicon-link"></span></a><span>2.1.1. Environment</span></h4><pre class="mermaid" data-processed="true"><svg id="mermaid-1639826627259" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="147.375" style="max-width: 683.03125px;" viewBox="0 0 683.03125 147.375"><style>#mermaid-1639826627259 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1639826627259 .error-icon{fill:#552222;}#mermaid-1639826627259 .error-text{fill:#552222;stroke:#552222;}#mermaid-1639826627259 .edge-thickness-normal{stroke-width:2px;}#mermaid-1639826627259 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1639826627259 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1639826627259 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1639826627259 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1639826627259 .marker{fill:#333333;stroke:#333333;}#mermaid-1639826627259 .marker.cross{stroke:#333333;}#mermaid-1639826627259 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1639826627259 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-1639826627259 .cluster-label text{fill:#333;}#mermaid-1639826627259 .cluster-label span{color:#333;}#mermaid-1639826627259 .label text,#mermaid-1639826627259 span{fill:#333;color:#333;}#mermaid-1639826627259 .node rect,#mermaid-1639826627259 .node circle,#mermaid-1639826627259 .node ellipse,#mermaid-1639826627259 .node polygon,#mermaid-1639826627259 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1639826627259 .node .label{text-align:center;}#mermaid-1639826627259 .node.clickable{cursor:pointer;}#mermaid-1639826627259 .arrowheadPath{fill:#333333;}#mermaid-1639826627259 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-1639826627259 .flowchart-link{stroke:#333333;fill:none;}#mermaid-1639826627259 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-1639826627259 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-1639826627259 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-1639826627259 .cluster text{fill:#333;}#mermaid-1639826627259 .cluster span{color:#333;}#mermaid-1639826627259 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-1639826627259 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g transform="translate(0, 0)"><marker id="flowchart-pointEnd" class="marker flowchart" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-pointStart" class="marker flowchart" viewBox="0 0 10 10" refX="0" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-circleEnd" class="marker flowchart" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="flowchart-circleStart" class="marker flowchart" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="flowchart-crossEnd" class="marker cross flowchart" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-crossStart" class="marker cross flowchart" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"><g class="cluster default" id="subGraph0"><rect style="" rx="0" ry="0" x="157.96875" y="8" width="349.328125" height="131.375"></rect><g class="cluster-label" transform="translate(266.59375, 13)"><foreignObject width="132.078125" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Abstraction Layer</span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M350.796875,73.6875L354.9635416666667,73.6875C359.1302083333333,73.6875,367.4635416666667,73.6875,375.796875,73.6875C384.1302083333333,73.6875,392.4635416666667,73.6875,396.6302083333333,73.6875L400.796875,73.6875" id="L-f2-f3-0" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-f2 LE-f3" style="fill:none;"></path><path d="M107.96875,73.6875L112.13541666666667,73.6875C116.30208333333333,73.6875,124.63541666666667,73.6875,132.96875,73.6875C141.30208333333334,73.6875,149.63541666666666,73.6875,157.96875,73.6875C166.30208333333334,73.6875,174.63541666666666,73.6875,178.80208333333334,73.6875L182.96875,73.6875" id="L-f1-f2-0" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-f1 LE-f2" style="fill:none;"></path><path d="M482.296875,73.6875L486.4635416666667,73.6875C490.6302083333333,73.6875,498.9635416666667,73.6875,507.296875,73.6875C515.6302083333334,73.6875,523.9635416666666,73.6875,532.296875,73.6875C540.6302083333334,73.6875,548.9635416666666,73.6875,553.1302083333334,73.6875L557.296875,73.6875" id="L-f3-f4-0" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-f3 LE-f4" style="fill:none;"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default default" id="flowchart-f3-13" transform="translate(441.546875, 73.6875)"><rect class="basic label-container" style="" rx="5" ry="5" x="-40.75" y="-19.09375" width="81.5" height="38.1875"></rect><g class="label" style="" transform="translate(-33.25, -11.59375)"><foreignObject width="66.5" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">JDBC API</span></div></foreignObject></g></g><g class="node default default" id="flowchart-f2-12" transform="translate(266.8828125, 73.6875)"><rect class="basic label-container" style="" rx="5" ry="5" x="-83.9140625" y="-30.6875" width="167.828125" height="61.375"></rect><g class="label" style="" transform="translate(-76.4140625, -23.1875)"><foreignObject width="152.828125" height="46.375"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Java Persistence API<br>(Hibernate)</span></div></foreignObject></g></g><g class="node default default" id="flowchart-f1-14" transform="translate(57.984375, 73.6875)"><rect class="basic label-container" style="" rx="5" ry="5" x="-49.984375" y="-19.09375" width="99.96875" height="38.1875"></rect><g class="label" style="" transform="translate(-42.484375, -11.59375)"><foreignObject width="84.96875" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Application</span></div></foreignObject></g></g><g class="node default default" id="flowchart-f4-17" transform="translate(616.1640625, 73.6875)"><rect class="basic label-container" style="" rx="5" ry="5" x="-58.8671875" y="-19.09375" width="117.734375" height="38.1875"></rect><g class="label" style="" transform="translate(-51.3671875, -11.59375)"><foreignObject width="102.734375" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Apache Derby</span></div></foreignObject></g></g></g></g></g></svg></pre><p><span>We use ORM to manage the database, to take advantage of object-oriented programming. Thanks to ORM, we can not only treat each piece of data in the form of an instance but also use the database without writing queries directly. Java uses JPA as a standard ORM specification. We adopted Hibernate, which is its representative implementation, to use JPA. In the </span><code>static</code><span> block of </span><code>HibernateUtil</code><span>, initialize JDBC and configure Hibernate. After that, the application can use the ORM by acquiring a DB session from </span><code>HibernateUtil</code><span>.</span></p><h4 id="212-Model" data-id="212-Model"><a class="anchor hidden-xs" href="#212-Model" title="212-Model"><span class="octicon octicon-link"></span></a><span>2.1.2. Model</span></h4><blockquote>
<p><span>💡 Getters and setters are omitted in below diagram.</span></p>
</blockquote><pre class="mermaid" data-processed="true"><svg id="mermaid-1639826634776" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="896.6875" style="max-width: 558.734375px;" viewBox="0 0 558.734375 896.6875"><style>#mermaid-1639826634776 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1639826634776 .error-icon{fill:#552222;}#mermaid-1639826634776 .error-text{fill:#552222;stroke:#552222;}#mermaid-1639826634776 .edge-thickness-normal{stroke-width:2px;}#mermaid-1639826634776 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1639826634776 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1639826634776 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1639826634776 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1639826634776 .marker{fill:#333333;stroke:#333333;}#mermaid-1639826634776 .marker.cross{stroke:#333333;}#mermaid-1639826634776 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1639826634776 g.classGroup text{fill:#9370DB;fill:#131300;stroke:none;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:10px;}#mermaid-1639826634776 g.classGroup text .title{font-weight:bolder;}#mermaid-1639826634776 .nodeLabel,#mermaid-1639826634776 .edgeLabel{color:#131300;}#mermaid-1639826634776 .edgeLabel .label rect{fill:#ECECFF;}#mermaid-1639826634776 .label text{fill:#131300;}#mermaid-1639826634776 .edgeLabel .label span{background:#ECECFF;}#mermaid-1639826634776 .classTitle{font-weight:bolder;}#mermaid-1639826634776 .node rect,#mermaid-1639826634776 .node circle,#mermaid-1639826634776 .node ellipse,#mermaid-1639826634776 .node polygon,#mermaid-1639826634776 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1639826634776 .divider{stroke:#9370DB;stroke:1;}#mermaid-1639826634776 g.clickable{cursor:pointer;}#mermaid-1639826634776 g.classGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaid-1639826634776 g.classGroup line{stroke:#9370DB;stroke-width:1;}#mermaid-1639826634776 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaid-1639826634776 .classLabel .label{fill:#9370DB;font-size:10px;}#mermaid-1639826634776 .relation{stroke:#333333;stroke-width:1;fill:none;}#mermaid-1639826634776 .dashed-line{stroke-dasharray:3;}#mermaid-1639826634776 #compositionStart,#mermaid-1639826634776 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826634776 #compositionEnd,#mermaid-1639826634776 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826634776 #dependencyStart,#mermaid-1639826634776 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826634776 #dependencyStart,#mermaid-1639826634776 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826634776 #extensionStart,#mermaid-1639826634776 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826634776 #extensionEnd,#mermaid-1639826634776 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826634776 #aggregationStart,#mermaid-1639826634776 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826634776 #aggregationEnd,#mermaid-1639826634776 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826634776 .edgeTerminals{font-size:11px;}#mermaid-1639826634776 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g transform="translate(0, 0)"><defs><marker id="classDiagram-aggregationStart" class="marker aggregation classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-aggregationEnd" class="marker aggregation classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-extensionStart" class="marker extension classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 1,7 L18,13 V 1 Z"></path></marker></defs><defs><marker id="classDiagram-extensionEnd" class="marker extension classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 1,1 V 13 L18,7 Z"></path></marker></defs><defs><marker id="classDiagram-compositionStart" class="marker composition classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-compositionEnd" class="marker composition classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-dependencyStart" class="marker dependency classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 5,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-dependencyEnd" class="marker dependency classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M145.47265625,81.16396551724138L129.833984375,89.96476293103449C114.1953125,98.76556034482758,82.91796875,116.36715517241379,67.279296875,154.5742025862069C51.640625,192.78125,51.640625,251.59375,51.640625,308.4739583333333C51.640625,365.3541666666667,51.640625,420.3020833333333,56.985026041666664,455.8876788933964C62.329427083333336,491.4732744534595,73.01822916666667,507.6965489069191,78.36263020833333,515.8081861336487L83.70703125,523.9198233603786" id="id1" class="edge-pattern-solid relation" style="fill:none" marker-start="url(#classDiagram-extensionStart)"></path><path d="M246.67578125,81.16396551724138L262.314453125,89.96476293103449C277.953125,98.76556034482758,309.23046875,116.36715517241379,324.869140625,131.26691091954024C340.5078125,146.16666666666666,340.5078125,158.36458333333334,340.5078125,164.46354166666666L340.5078125,170.5625" id="id2" class="edge-pattern-solid relation" style="fill:none" marker-start="url(#classDiagram-extensionStart)"></path><path d="M340.5078125,450.25L340.5078125,454.4166666666667C340.5078125,458.5833333333333,340.5078125,466.9166666666667,335.1634114583333,479.19497056006304C329.8190104166667,491.4732744534595,319.1302083333333,507.6965489069191,313.7858072916667,515.8081861336487L308.44140625,523.9198233603786" id="id3" class="edge-pattern-solid relation" style="fill:none" marker-end="url(#classDiagram-dependencyEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(51.640625, 310.40625)"><g class="label" transform="translate(-43.640625, -11.59375)"><foreignObject width="87.28125" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">implements</span></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(340.5078125, 133.96875)"><g class="label" transform="translate(-43.640625, -11.59375)"><foreignObject width="87.28125" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">implements</span></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeTerminals" transform="translate(322.9569642611955, 464.4837193266276)"><g class="inner" transform="translate(0, 0)"><foreignObject style="width: 9px; height: 12px;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">1</span></div></foreignObject></g></g><g class="edgeTerminals" transform="translate(325.59522176328466, 512.5591269988668)"><g class="inner" transform="translate(0, 0)"></g><foreignObject style="width: 36px; height: 12px;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">many</span></div></foreignObject></g></g><g class="nodes"><g class="node default" id="classid-Model-3" transform="translate(196.07421875, 52.6875)"><rect class="outer title-state" x="-50.6015625" y="-44.6875" width="101.203125" height="89.375"></rect><line class="divider" x1="-50.6015625" x2="50.6015625" y1="17.6875" y2="17.6875"></line><line class="divider" x1="-50.6015625" x2="50.6015625" y1="33.6875" y2="33.6875"></line><g class="label"><foreignObject width="86.203125" height="23.1875" transform="translate( -43.1015625, -37.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">«interface»</span></div></foreignObject><foreignObject class="classTitle" width="45.9375" height="23.1875" transform="translate( -22.96875, -10)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Model</span></div></foreignObject></g></g><g class="node default" id="classid-MetricModel-4" transform="translate(196.07421875, 694.46875)"><rect class="outer title-state" x="-112.3671875" y="-194.21875" width="224.734375" height="388.4375"></rect><line class="divider" x1="-112.3671875" x2="112.3671875" y1="-159.03125" y2="-159.03125"></line><line class="divider" x1="-112.3671875" x2="112.3671875" y1="101.65625" y2="101.65625"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="95.296875" height="23.1875" transform="translate( -47.6484375, -186.71875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">MetricModel</span></div></foreignObject><foreignObject width="60.4375" height="23.1875" transform="translate( -104.8671875, -147.53125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-Long id</span></div></foreignObject><foreignObject width="104.25" height="23.1875" transform="translate( -104.8671875, -120.34375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-String metric</span></div></foreignObject><foreignObject width="132.875" height="23.1875" transform="translate( -104.8671875, -93.15625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-String className</span></div></foreignObject><foreignObject width="153.8125" height="23.1875" transform="translate( -104.8671875, -65.96875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-String methodName</span></div></foreignObject><foreignObject width="88.375" height="23.1875" transform="translate( -104.8671875, -38.78125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-String type</span></div></foreignObject><foreignObject width="107.296875" height="23.1875" transform="translate( -104.8671875, -11.59375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-Double figure</span></div></foreignObject><foreignObject width="103.796875" height="23.1875" transform="translate( -104.8671875, 15.59375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-Date created</span></div></foreignObject><foreignObject width="107.5" height="23.1875" transform="translate( -104.8671875, 42.78125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-Date updated</span></div></foreignObject><foreignObject width="191.734375" height="23.1875" transform="translate( -104.8671875, 69.96875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-CalcHistoryModel history</span></div></foreignObject><foreignObject width="140.875" height="23.1875" transform="translate( -104.8671875, 109.15625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+onUpdate() : void</span></div></foreignObject><foreignObject width="209.734375" height="23.1875" transform="translate( -104.8671875, 136.34375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+equals(Object o) : boolean</span></div></foreignObject><foreignObject width="129.421875" height="23.1875" transform="translate( -104.8671875, 163.53125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+hashCode() : int</span></div></foreignObject></g></g><g class="node default" id="classid-CalcHistoryModel-5" transform="translate(340.5078125, 310.40625)"><rect class="outer title-state" x="-210.2265625" y="-139.84375" width="420.453125" height="279.6875"></rect><line class="divider" x1="-210.2265625" x2="210.2265625" y1="-104.65625" y2="-104.65625"></line><line class="divider" x1="-210.2265625" x2="210.2265625" y1="20.09375" y2="20.09375"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="134.375" height="23.1875" transform="translate( -67.1875, -132.34375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">CalcHistoryModel</span></div></foreignObject><foreignObject width="60.4375" height="23.1875" transform="translate( -202.7265625, -93.15625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-Long id</span></div></foreignObject><foreignObject width="104.25" height="23.1875" transform="translate( -202.7265625, -65.96875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-String metric</span></div></foreignObject><foreignObject width="125.578125" height="23.1875" transform="translate( -202.7265625, -38.78125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-Date timestamp</span></div></foreignObject><foreignObject width="296.15625" height="23.1875" transform="translate( -202.7265625, -11.59375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-Collection&lt;MetricModel&gt; metricModels</span></div></foreignObject><foreignObject width="377.265625" height="23.1875" transform="translate( -202.7265625, 27.59375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+addMetricModel(MetricModel metricModel) : void</span></div></foreignObject><foreignObject width="405.453125" height="23.1875" transform="translate( -202.7265625, 54.78125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+removeMetricModel(MetricModel metricModel) : void</span></div></foreignObject><foreignObject width="209.734375" height="23.1875" transform="translate( -202.7265625, 81.96875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+equals(Object o) : boolean</span></div></foreignObject><foreignObject width="129.421875" height="23.1875" transform="translate( -202.7265625, 109.15625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+hashCode() : int</span></div></foreignObject></g></g></g></g></g></svg></pre><h5 id="MetricModel" data-id="MetricModel"><a class="anchor hidden-xs" href="#MetricModel" title="MetricModel"><span class="octicon octicon-link"></span></a><span>MetricModel</span></h5><table>
<thead>
<tr>
<th style="text-align:center"><span>id</span></th>
<th style="text-align:center"><span>metric</span></th>
<th style="text-align:center"><span>class</span></th>
<th style="text-align:center"><span>method</span></th>
<th style="text-align:center"><span>type</span></th>
<th style="text-align:center"><span>figure</span></th>
<th style="text-align:center"><span>history</span></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><span>1</span></td>
<td style="text-align:center"><span>Cyclo</span></td>
<td style="text-align:center"><span>classA</span></td>
<td style="text-align:center"><span>methodAA</span></td>
<td style="text-align:center"><span>c</span></td>
<td style="text-align:center"><span>2</span></td>
<td style="text-align:center"><span>a-pp-le</span></td>
</tr>
<tr>
<td style="text-align:center"><span>2</span></td>
<td style="text-align:center"><span>Cyclo</span></td>
<td style="text-align:center"><span>classA</span></td>
<td style="text-align:center"><span>methodAB</span></td>
<td style="text-align:center"><span>c</span></td>
<td style="text-align:center"><span>3</span></td>
<td style="text-align:center"><span>a-pp-le</span></td>
</tr>
<tr>
<td style="text-align:center"><span>3</span></td>
<td style="text-align:center"><span>Cyclo</span></td>
<td style="text-align:center"><span>classB</span></td>
<td style="text-align:center"><span>methodBA</span></td>
<td style="text-align:center"><span>c</span></td>
<td style="text-align:center"><span>5</span></td>
<td style="text-align:center"><span>a-pp-le</span></td>
</tr>
<tr>
<td style="text-align:center"><span>4</span></td>
<td style="text-align:center"><span>Cyclo</span></td>
<td style="text-align:center"><span>classA</span></td>
<td style="text-align:center"><span>methodAA</span></td>
<td style="text-align:center"><span>c</span></td>
<td style="text-align:center"><span>7</span></td>
<td style="text-align:center"><span>ba-na-na</span></td>
</tr>
<tr>
<td style="text-align:center"><span>5</span></td>
<td style="text-align:center"><span>Cyclo</span></td>
<td style="text-align:center"><span>classA</span></td>
<td style="text-align:center"><span>methodAB</span></td>
<td style="text-align:center"><span>c</span></td>
<td style="text-align:center"><span>0</span></td>
<td style="text-align:center"><span>ba-na-na</span></td>
</tr>
<tr>
<td style="text-align:center"><span>6</span></td>
<td style="text-align:center"><span>Cyclo</span></td>
<td style="text-align:center"><span>classB</span></td>
<td style="text-align:center"><span>methodBA</span></td>
<td style="text-align:center"><span>c</span></td>
<td style="text-align:center"><span>91</span></td>
<td style="text-align:center"><span>ba-na-na</span></td>
</tr>
<tr>
<td style="text-align:center"><span>7</span></td>
<td style="text-align:center"><span>Halsted</span></td>
<td style="text-align:center"><span>classA</span></td>
<td style="text-align:center"><span>methodAA</span></td>
<td style="text-align:center"><span>a</span></td>
<td style="text-align:center"><span>10</span></td>
<td style="text-align:center"><span>c-a-t</span></td>
</tr>
<tr>
<td style="text-align:center"><span>8</span></td>
<td style="text-align:center"><span>Halsted</span></td>
<td style="text-align:center"><span>classA</span></td>
<td style="text-align:center"><span>methodAA</span></td>
<td style="text-align:center"><span>b</span></td>
<td style="text-align:center"><span>2</span></td>
<td style="text-align:center"><span>c-a-t</span></td>
</tr>
<tr>
<td style="text-align:center"><span>9</span></td>
<td style="text-align:center"><span>Halsted</span></td>
<td style="text-align:center"><span>classA</span></td>
<td style="text-align:center"><span>methodAA</span></td>
<td style="text-align:center"><span>c</span></td>
<td style="text-align:center"><span>3</span></td>
<td style="text-align:center"><span>c-a-t</span></td>
</tr>
<tr>
<td style="text-align:center"><span>10</span></td>
<td style="text-align:center"><span>Halsted</span></td>
<td style="text-align:center"><span>classA</span></td>
<td style="text-align:center"><span>methodAA</span></td>
<td style="text-align:center"><span>d</span></td>
<td style="text-align:center"><span>5</span></td>
<td style="text-align:center"><span>c-a-t</span></td>
</tr>
<tr>
<td style="text-align:center"><span>…</span></td>
<td style="text-align:center"><span>…</span></td>
<td style="text-align:center"><span>…</span></td>
<td style="text-align:center"><span>…</span></td>
<td style="text-align:center"><span>…</span></td>
<td style="text-align:center"><span>…</span></td>
<td style="text-align:center"><span>…</span></td>
</tr>
</tbody>
</table><p><code>MetricModel</code><span> is a database model for recording metrics. We implemented this model to store numbers according to metrics, classes, methods, and types. Most field names are intuitive, but some namings are not. Those are </span><code>type</code><span> and </span><code>history</code><span>. First, </span><code>type</code><span> is a field for the metrics which have several numerical values in one metric. For example, Halsted complexity returns four types of the calculation result. Therefore, we additionally introduce a type field to record it separately. Second, the </span><code>history</code><span> field represents a many-to-one relationship with </span><code>CalcHistoryModel</code><span>. It is necessary to manage the metrics generated through the same calculation attempt since the calculation generates results for each method. For this, we introduce the </span><code>history</code><span> field to group each metric calculated together into the same group.</span></p><h5 id="CalcHistoryModel" data-id="CalcHistoryModel"><a class="anchor hidden-xs" href="#CalcHistoryModel" title="CalcHistoryModel"><span class="octicon octicon-link"></span></a><span>CalcHistoryModel</span></h5><table>
<thead>
<tr>
<th style="text-align:center"><span>id</span></th>
<th style="text-align:center"><span>metric</span></th>
<th style="text-align:center"><span>timestamp</span></th>
<th style="text-align:center"><span>metricModels</span></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><span>a-pp-le</span></td>
<td style="text-align:center"><span>Cyclo</span></td>
<td style="text-align:center"><span>11 pm.</span></td>
<td style="text-align:center"><span>1, 2, 3</span></td>
</tr>
<tr>
<td style="text-align:center"><span>ba-na-na</span></td>
<td style="text-align:center"><span>Cyclo</span></td>
<td style="text-align:center"><span>12 pm.</span></td>
<td style="text-align:center"><span>4, 5, 6</span></td>
</tr>
<tr>
<td style="text-align:center"><span>c-a-t</span></td>
<td style="text-align:center"><span>Halsted</span></td>
<td style="text-align:center"><span>09 pm.</span></td>
<td style="text-align:center"><span>7, 8, 9, 10</span></td>
</tr>
<tr>
<td style="text-align:center"><span>…</span></td>
<td style="text-align:center"><span>…</span></td>
<td style="text-align:center"><span>…</span></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table><p><code>CalcHistoryModel</code><span> is a database model for storing calculation history. It groups the </span><code>MetricModel</code><span>s generated by the calculation of each metric and records the time. In this case, </span><code>metricModels</code><span> is a field in a one-to-many relationship with </span><code>MetricModel</code><span>.</span></p><h4 id="212-Service" data-id="212-Service"><a class="anchor hidden-xs" href="#212-Service" title="212-Service"><span class="octicon octicon-link"></span></a><span>2.1.2. Service</span></h4><blockquote>
<p><span>💡 Getters and setters are omitted in below diagram.</span></p>
</blockquote><pre class="mermaid" data-processed="true"><svg id="mermaid-1639826673604" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="322.875" style="max-width: 491.625px;" viewBox="0 0 491.625 322.875"><style>#mermaid-1639826673604 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1639826673604 .error-icon{fill:#552222;}#mermaid-1639826673604 .error-text{fill:#552222;stroke:#552222;}#mermaid-1639826673604 .edge-thickness-normal{stroke-width:2px;}#mermaid-1639826673604 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1639826673604 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1639826673604 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1639826673604 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1639826673604 .marker{fill:#333333;stroke:#333333;}#mermaid-1639826673604 .marker.cross{stroke:#333333;}#mermaid-1639826673604 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1639826673604 g.classGroup text{fill:#9370DB;fill:#131300;stroke:none;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:10px;}#mermaid-1639826673604 g.classGroup text .title{font-weight:bolder;}#mermaid-1639826673604 .nodeLabel,#mermaid-1639826673604 .edgeLabel{color:#131300;}#mermaid-1639826673604 .edgeLabel .label rect{fill:#ECECFF;}#mermaid-1639826673604 .label text{fill:#131300;}#mermaid-1639826673604 .edgeLabel .label span{background:#ECECFF;}#mermaid-1639826673604 .classTitle{font-weight:bolder;}#mermaid-1639826673604 .node rect,#mermaid-1639826673604 .node circle,#mermaid-1639826673604 .node ellipse,#mermaid-1639826673604 .node polygon,#mermaid-1639826673604 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1639826673604 .divider{stroke:#9370DB;stroke:1;}#mermaid-1639826673604 g.clickable{cursor:pointer;}#mermaid-1639826673604 g.classGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaid-1639826673604 g.classGroup line{stroke:#9370DB;stroke-width:1;}#mermaid-1639826673604 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaid-1639826673604 .classLabel .label{fill:#9370DB;font-size:10px;}#mermaid-1639826673604 .relation{stroke:#333333;stroke-width:1;fill:none;}#mermaid-1639826673604 .dashed-line{stroke-dasharray:3;}#mermaid-1639826673604 #compositionStart,#mermaid-1639826673604 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826673604 #compositionEnd,#mermaid-1639826673604 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826673604 #dependencyStart,#mermaid-1639826673604 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826673604 #dependencyStart,#mermaid-1639826673604 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826673604 #extensionStart,#mermaid-1639826673604 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826673604 #extensionEnd,#mermaid-1639826673604 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826673604 #aggregationStart,#mermaid-1639826673604 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826673604 #aggregationEnd,#mermaid-1639826673604 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826673604 .edgeTerminals{font-size:11px;}#mermaid-1639826673604 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g transform="translate(0, 0)"><defs><marker id="classDiagram-aggregationStart" class="marker aggregation classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-aggregationEnd" class="marker aggregation classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-extensionStart" class="marker extension classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 1,7 L18,13 V 1 Z"></path></marker></defs><defs><marker id="classDiagram-extensionEnd" class="marker extension classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 1,1 V 13 L18,7 Z"></path></marker></defs><defs><marker id="classDiagram-compositionStart" class="marker composition classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-compositionEnd" class="marker composition classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-dependencyStart" class="marker dependency classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 5,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-dependencyEnd" class="marker dependency classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g class="node default" id="classid-MetricService-7" transform="translate(245.8125, 161.4375)"><rect class="outer title-state" x="-237.8125" y="-153.4375" width="475.625" height="306.875"></rect><line class="divider" x1="-237.8125" x2="237.8125" y1="-118.25" y2="-118.25"></line><line class="divider" x1="-237.8125" x2="237.8125" y1="-102.25" y2="-102.25"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="107.125" height="23.1875" transform="translate( -53.5625, -145.9375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">MetricService</span></div></foreignObject><foreignObject width="339.515625" height="23.1875" transform="translate( -230.3125, -94.75)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+getMetric(String metric, Integer limit) : List</span></div></foreignObject><foreignObject width="271.015625" height="23.1875" transform="translate( -230.3125, -67.5625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+getMetric(String metric) : Optional</span></div></foreignObject><foreignObject width="277.234375" height="23.1875" transform="translate( -230.3125, -40.375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+compareMetric(String metric) : Map</span></div></foreignObject><foreignObject width="460.625" height="23.1875" transform="translate( -230.3125, -13.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+generateCalcHistoryModel(String metric) : CalcHistoryModel</span></div></foreignObject><foreignObject width="331.640625" height="23.1875" transform="translate( -230.3125, 14)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+addMetric(String metric, ...) : MetricModel</span></div></foreignObject><foreignObject width="412.5625" height="23.1875" transform="translate( -230.3125, 41.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+query(String metric, Integer limit) : CalcHistoryModel</span></div></foreignObject><foreignObject width="307.09375" height="23.1875" transform="translate( -230.3125, 68.375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+query(String metric) : CalcHistoryModel</span></div></foreignObject><foreignObject width="404.84375" height="23.1875" transform="translate( -230.3125, 95.5625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+query(String metric, ..., Integer limit) : MetricModel</span></div></foreignObject><foreignObject width="299.375" height="23.1875" transform="translate( -230.3125, 122.75)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+query(String metric, ...) : MetricModel</span></div></foreignObject></g></g></g></g></g></svg></pre><p><code>MetricService</code><span> defines various helper methods for interacting with database. There are 4 main functions in this class.</span></p><h5 id="Get-from-database" data-id="Get-from-database"><a class="anchor hidden-xs" href="#Get-from-database" title="Get-from-database"><span class="octicon octicon-link"></span></a><span>Get from database</span></h5><p><code>getMetric</code><span> and </span><code>query</code><span> methods gets metric data from database. Methods with </span><code>limit</code><span> at the end of parameter gets multiple data(max size of </span><code>limit</code><span>) and return </span><code>List</code><span>(if many) or </span><code>Optional</code><span>(if one).</span></p><h6 id="getMetric" data-id="getMetric"><a class="anchor hidden-xs" href="#getMetric" title="getMetric"><span class="octicon octicon-link"></span></a><span>getMetric()</span></h6><p><code>getMetric()</code><span> methods gets </span><code>MetricModel</code><span> data with metric name </span><code>metric</code><span> and convert the data into </span><code>Map&lt;String, Map&lt;String, Map&lt;String, Double&gt;&gt;&gt;</code><span>. The map can be understood as </span><code>Map&lt;"Class name", Map&lt;"Method name", Map&lt;"Type", "Figure"&gt;&gt;&gt;</code><span>.</span></p><h6 id="query" data-id="query"><a class="anchor hidden-xs" href="#query" title="query"><span class="octicon octicon-link"></span></a><span>query()</span></h6><p><code>query()</code><span> methods with more than two parameters return </span><code>MetricModel</code><span> data from database. Parameters are </span><code>metric</code><span>, </span><code>className</code><span>, </span><code>methodName</code><span>, </span><code>type</code><span>, </span><code>history</code><span>, and </span><code>limit</code><span>. Any parameter could be null. If all parameters are null, this method returns all </span><code>MetricModel</code><span> data stored in database, in descending order by </span><code>created</code><span>. If a parameter is not null, data is filtered by that parameter using </span><code>criteria.where()</code><span>. For example, if </span><code>className</code><span> was </span><code>ExampleClass</code><span>, then only the data about </span><code>Exampleclass</code><span> is returned.</span><br>
<code>query()</code><span> methods with only one or two parameters return </span><code>CalcHistoryModel</code><span> data from database. The algorithm works same as above one.</span></p><h5 id="Save-to-database" data-id="Save-to-database"><a class="anchor hidden-xs" href="#Save-to-database" title="Save-to-database"><span class="octicon octicon-link"></span></a><span>Save to database</span></h5><h6 id="addMetric" data-id="addMetric"><a class="anchor hidden-xs" href="#addMetric" title="addMetric"><span class="octicon octicon-link"></span></a><span>addMetric()</span></h6><p><code>addMetric()</code><span> method creates a new </span><code>MetricModel</code><span> with input metric data and save it to database and return it.</span></p><h5 id="Generate-new-CalcHistoryModel" data-id="Generate-new-CalcHistoryModel"><a class="anchor hidden-xs" href="#Generate-new-CalcHistoryModel" title="Generate-new-CalcHistoryModel"><span class="octicon octicon-link"></span></a><span>Generate new CalcHistoryModel</span></h5><h6 id="generateCalcHistoryModel" data-id="generateCalcHistoryModel"><a class="anchor hidden-xs" href="#generateCalcHistoryModel" title="generateCalcHistoryModel"><span class="octicon octicon-link"></span></a><span>generateCalcHistoryModel()</span></h6><p><code>generateCalcHistoryModel()</code><span> method simply generates a new </span><code>CalcHistoryModel</code><span> and return it. Returned object will be used to save and get </span><code>MetricModel</code><span>.</span></p><h5 id="Compare-new-data-with-old-one" data-id="Compare-new-data-with-old-one"><a class="anchor hidden-xs" href="#Compare-new-data-with-old-one" title="Compare-new-data-with-old-one"><span class="octicon octicon-link"></span></a><span>Compare new data with old one</span></h5><h6 id="compareMetric" data-id="compareMetric"><a class="anchor hidden-xs" href="#compareMetric" title="compareMetric"><span class="octicon octicon-link"></span></a><span>compareMetric()</span></h6><p><code>compareMetric()</code><span> gets two most recent metric data which metric name is given </span><code>metric</code><span>, and return the difference of figure between two of them (old - new).</span></p><h6 id="About-MetricModelService…" data-id="About-MetricModelService…"><a class="anchor hidden-xs" href="#About-MetricModelService…" title="About-MetricModelService…"><span class="octicon octicon-link"></span></a><span>About MetricModelService…</span></h6><p><span>There is a class called </span><code>MetricModelService</code><span>. This class is initial desgin of database service class, but after </span><code>BaseMetric</code><span> was implemented, we created new one for </span><code>BaseMetric</code><span>. </span><code>MetricModelService</code><span> is only used for code line metric now. Algorithm is similar, so we will omit it.</span></p><h3 id="22-Metric" data-id="22-Metric"><a class="anchor hidden-xs" href="#22-Metric" title="22-Metric"><span class="octicon octicon-link"></span></a><span>2.2. Metric</span></h3><h4 id="221-Visiting-Metric-Minjae" data-id="221-Visiting-Metric-Minjae"><a class="anchor hidden-xs" href="#221-Visiting-Metric-Minjae" title="221-Visiting-Metric-Minjae"><span class="octicon octicon-link"></span></a><span>2.2.1. Visiting Metric (@Minjae)</span></h4><blockquote>
<p><span>💡 Getters and setters are omitted in below diagram.</span></p>
</blockquote><pre class="mermaid" data-processed="true"><svg id="mermaid-1639826673903" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="1300.5" style="max-width: 434.609375px;" viewBox="0 0 434.609375 1300.5"><style>#mermaid-1639826673903 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1639826673903 .error-icon{fill:#552222;}#mermaid-1639826673903 .error-text{fill:#552222;stroke:#552222;}#mermaid-1639826673903 .edge-thickness-normal{stroke-width:2px;}#mermaid-1639826673903 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1639826673903 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1639826673903 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1639826673903 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1639826673903 .marker{fill:#333333;stroke:#333333;}#mermaid-1639826673903 .marker.cross{stroke:#333333;}#mermaid-1639826673903 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1639826673903 g.classGroup text{fill:#9370DB;fill:#131300;stroke:none;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:10px;}#mermaid-1639826673903 g.classGroup text .title{font-weight:bolder;}#mermaid-1639826673903 .nodeLabel,#mermaid-1639826673903 .edgeLabel{color:#131300;}#mermaid-1639826673903 .edgeLabel .label rect{fill:#ECECFF;}#mermaid-1639826673903 .label text{fill:#131300;}#mermaid-1639826673903 .edgeLabel .label span{background:#ECECFF;}#mermaid-1639826673903 .classTitle{font-weight:bolder;}#mermaid-1639826673903 .node rect,#mermaid-1639826673903 .node circle,#mermaid-1639826673903 .node ellipse,#mermaid-1639826673903 .node polygon,#mermaid-1639826673903 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1639826673903 .divider{stroke:#9370DB;stroke:1;}#mermaid-1639826673903 g.clickable{cursor:pointer;}#mermaid-1639826673903 g.classGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaid-1639826673903 g.classGroup line{stroke:#9370DB;stroke-width:1;}#mermaid-1639826673903 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaid-1639826673903 .classLabel .label{fill:#9370DB;font-size:10px;}#mermaid-1639826673903 .relation{stroke:#333333;stroke-width:1;fill:none;}#mermaid-1639826673903 .dashed-line{stroke-dasharray:3;}#mermaid-1639826673903 #compositionStart,#mermaid-1639826673903 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826673903 #compositionEnd,#mermaid-1639826673903 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826673903 #dependencyStart,#mermaid-1639826673903 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826673903 #dependencyStart,#mermaid-1639826673903 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826673903 #extensionStart,#mermaid-1639826673903 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826673903 #extensionEnd,#mermaid-1639826673903 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826673903 #aggregationStart,#mermaid-1639826673903 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826673903 #aggregationEnd,#mermaid-1639826673903 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826673903 .edgeTerminals{font-size:11px;}#mermaid-1639826673903 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g transform="translate(0, 0)"><defs><marker id="classDiagram-aggregationStart" class="marker aggregation classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-aggregationEnd" class="marker aggregation classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-extensionStart" class="marker extension classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 1,7 L18,13 V 1 Z"></path></marker></defs><defs><marker id="classDiagram-extensionEnd" class="marker extension classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 1,1 V 13 L18,7 Z"></path></marker></defs><defs><marker id="classDiagram-compositionStart" class="marker composition classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-compositionEnd" class="marker composition classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-dependencyStart" class="marker dependency classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 5,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-dependencyEnd" class="marker dependency classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M217.3046875,233.3125L217.3046875,239.41145833333334C217.3046875,245.51041666666666,217.3046875,257.7083333333333,217.3046875,269.90625C217.3046875,282.1041666666667,217.3046875,294.3020833333333,217.3046875,300.4010416666667L217.3046875,306.5" id="id1" class="edge-pattern-solid relation" style="fill:none" marker-start="url(#classDiagram-extensionStart)"></path><path d="M217.3046875,749.3125L217.3046875,755.4114583333334C217.3046875,761.5104166666666,217.3046875,773.7083333333334,217.3046875,785.90625C217.3046875,798.1041666666666,217.3046875,810.3020833333334,217.3046875,816.4010416666666L217.3046875,822.5" id="id2" class="edge-pattern-solid relation" style="fill:none" marker-start="url(#classDiagram-extensionStart)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(217.3046875, 269.90625)"><g class="label" transform="translate(-43.640625, -11.59375)"><foreignObject width="87.28125" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">implements</span></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(217.3046875, 785.90625)"><g class="label" transform="translate(-29.203125, -11.59375)"><foreignObject width="58.40625" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">extends</span></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="classid-Metric-11" transform="translate(217.3046875, 120.65625)"><rect class="outer title-state" x="-122.8125" y="-112.65625" width="245.625" height="225.3125"></rect><line class="divider" x1="-122.8125" x2="122.8125" y1="-50.28125" y2="-50.28125"></line><line class="divider" x1="-122.8125" x2="122.8125" y1="-34.28125" y2="-34.28125"></line><g class="label"><foreignObject width="86.203125" height="23.1875" transform="translate( -43.1015625, -105.15625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">«interface»</span></div></foreignObject><foreignObject class="classTitle" width="49.359375" height="23.1875" transform="translate( -24.6796875, -77.96875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Metric</span></div></foreignObject><foreignObject width="112.609375" height="23.1875" transform="translate( -115.3125, -26.78125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+get() : double</span></div></foreignObject><foreignObject width="157.515625" height="23.1875" transform="translate( -115.3125, 0.40625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+calculate() : double</span></div></foreignObject><foreignObject width="120.578125" height="23.1875" transform="translate( -115.3125, 27.59375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+getID() : String</span></div></foreignObject><foreignObject width="230.625" height="23.1875" transform="translate( -115.3125, 54.78125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+checkDegradation() : boolean</span></div></foreignObject><foreignObject width="101.90625" height="23.1875" transform="translate( -115.3125, 81.96875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+save() : void</span></div></foreignObject></g></g><g class="node default" id="classid-BaseMetric-12" transform="translate(217.3046875, 527.90625)"><rect class="outer title-state" x="-209.3046875" y="-221.40625" width="418.609375" height="442.8125"></rect><line class="divider" x1="-209.3046875" x2="209.3046875" y1="-186.21875" y2="-186.21875"></line><line class="divider" x1="-209.3046875" x2="209.3046875" y1="-61.46875" y2="-61.46875"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="84.890625" height="23.1875" transform="translate( -42.4453125, -213.90625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">BaseMetric</span></div></foreignObject><foreignObject width="397.4375" height="23.1875" transform="translate( -201.8046875, -174.71875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+final Map&lt;String, Map&lt;PsiMethod, Double&gt;&gt; metrics</span></div></foreignObject><foreignObject width="184.84375" height="23.1875" transform="translate( -201.8046875, -147.53125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-WarningCondition cond;</span></div></foreignObject><foreignObject width="117.484375" height="23.1875" transform="translate( -201.8046875, -120.34375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-double metric;</span></div></foreignObject><foreignObject width="75.5" height="23.1875" transform="translate( -201.8046875, -93.15625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-String id;</span></div></foreignObject><foreignObject width="102.484375" height="23.1875" transform="translate( -201.8046875, -53.96875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+BaseMetric()</span></div></foreignObject><foreignObject width="335.8125" height="23.1875" transform="translate( -201.8046875, -26.78125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+setCondition(WarningCondition cond) : void</span></div></foreignObject><foreignObject width="157.515625" height="23.1875" transform="translate( -201.8046875, 0.40625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+calculate() : double</span></div></foreignObject><foreignObject width="112.609375" height="23.1875" transform="translate( -201.8046875, 27.59375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+get() : double</span></div></foreignObject><foreignObject width="403.609375" height="23.1875" transform="translate( -201.8046875, 54.78125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+get(PsiClass psiClass, PsiMethod psiMethod) : Double</span></div></foreignObject><foreignObject width="395.703125" height="23.1875" transform="translate( -201.8046875, 81.96875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+setWarningCondition(WarningCondition cond) : void</span></div></foreignObject><foreignObject width="236.296875" height="23.1875" transform="translate( -201.8046875, 109.15625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+getDegradationMetrics() : Map</span></div></foreignObject><foreignObject width="230.625" height="23.1875" transform="translate( -201.8046875, 136.34375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+checkDegradation() : boolean</span></div></foreignObject><foreignObject width="266.515625" height="23.1875" transform="translate( -201.8046875, 163.53125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+save(CalcHistoryModel calc) : void</span></div></foreignObject><foreignObject width="101.90625" height="23.1875" transform="translate( -201.8046875, 190.71875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+save() : void</span></div></foreignObject></g></g><g class="node default" id="classid-VisitingMetric-13" transform="translate(217.3046875, 1057.5)"><rect class="outer title-state" x="-177.609375" y="-235" width="355.21875" height="470"></rect><line class="divider" x1="-177.609375" x2="177.609375" y1="-199.8125" y2="-199.8125"></line><line class="divider" x1="-177.609375" x2="177.609375" y1="-75.0625" y2="-75.0625"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="106.859375" height="23.1875" transform="translate( -53.4296875, -227.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">VisitingMetric</span></div></foreignObject><foreignObject width="231.09375" height="23.1875" transform="translate( -170.109375, -188.3125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+final PsiElementVisitor visitor</span></div></foreignObject><foreignObject width="139.40625" height="23.1875" transform="translate( -170.109375, -161.125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-double visitResult</span></div></foreignObject><foreignObject width="176.53125" height="23.1875" transform="translate( -170.109375, -133.9375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-PsiElement psiElement</span></div></foreignObject><foreignObject width="120.71875" height="23.1875" transform="translate( -170.109375, -106.75)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-Project project</span></div></foreignObject><foreignObject width="273.0625" height="23.1875" transform="translate( -170.109375, -67.5625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+VisitingMetric(PsiElement element)</span></div></foreignObject><foreignObject width="238.09375" height="23.1875" transform="translate( -170.109375, -40.375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+VisitingMetric(Project project)</span></div></foreignObject><foreignObject width="191.1875" height="23.1875" transform="translate( -170.109375, -13.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">#getVisitResult() : double</span></div></foreignObject><foreignObject width="269.4375" height="23.1875" transform="translate( -170.109375, 14)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">#setVisitResult(double result) : void</span></div></foreignObject><foreignObject width="290.296875" height="23.1875" transform="translate( -170.109375, 41.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">#visit(PsiElement psiElement) : double</span></div></foreignObject><foreignObject width="234.484375" height="23.1875" transform="translate( -170.109375, 68.375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">#visit(Project project) : double</span></div></foreignObject><foreignObject width="157.515625" height="23.1875" transform="translate( -170.109375, 95.5625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+calculate() : double</span></div></foreignObject><foreignObject width="329.078125" height="23.1875" transform="translate( -170.109375, 122.75)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">#visitPackageMetric(PsiPackage pack) : void</span></div></foreignObject><foreignObject width="294.953125" height="23.1875" transform="translate( -170.109375, 149.9375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">#visitClassMetric(PsiClass aClass) : void</span></div></foreignObject><foreignObject width="340.21875" height="23.1875" transform="translate( -170.109375, 177.125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">#visitMethodMetric(PsiMethod method) : void</span></div></foreignObject><foreignObject width="177.890625" height="23.1875" transform="translate( -170.109375, 204.3125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">#visit(.*)Metric () : void</span></div></foreignObject></g></g></g></g></g></svg></pre><p><code>VistingMetric</code><span> is implemented to provide a template for exploiting Intellij PSI. This class provides a basic template for traversing packages with </span><code>PsiElementVisitor</code><span> and calculating metrics.</span></p><h5 id="Structure" data-id="Structure"><a class="anchor hidden-xs" href="#Structure" title="Structure"><span class="octicon octicon-link"></span></a><span>Structure</span></h5><h6 id="Visitor" data-id="Visitor"><a class="anchor hidden-xs" href="#Visitor" title="Visitor"><span class="octicon octicon-link"></span></a><span>Visitor</span></h6><pre><code class="java hljs"><span class="token keyword">final</span> <span class="token keyword">public</span> <span class="token class-name">PsiElementVisitor</span> visitor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JavaElementVisitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">visitDirectory</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NotNull</span> <span class="token class-name">PsiDirectory</span> dir<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Logics to visit all packages in directory.</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">visitPackage</span><span class="token punctuation">(</span><span class="token class-name">PsiPackage</span> pack<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">visitPackageMetric</span><span class="token punctuation">(</span>pack<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><p><code>visitor</code><span> is an instance that actually performs visiting. This instance exists in the form of an anonymous class that extends </span><code>JavaElementVisitor</code><span>. We have overridden all methods provided by </span><code>JavaElementVisitor</code><span>, and each visit method is implemented to call the corresponding external visit virtual method. Additionally, </span><code>visitor</code><span> includes the ability to search for the highest-level packages in the </span><code>visitDirectory</code><span> method.</span></p><pre><code class="java hljs"><span class="token keyword">private</span> <span class="token keyword">double</span> visitResult <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><p><span>Each method of </span><code>visitor</code><span> does not return a value, but there is a need to share a value among visit methods. For this, we introduced the </span><code>visitResult</code><span> variable. Each visit method accumulates the calculation result through this variable.</span></p><h6 id="Entrypoint" data-id="Entrypoint"><a class="anchor hidden-xs" href="#Entrypoint" title="Entrypoint"><span class="octicon octicon-link"></span></a><span>Entrypoint</span></h6><pre><code class="java hljs"><span class="token keyword">private</span> <span class="token class-name">PsiElement</span> psiElement<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">Project</span> project<span class="token punctuation">;</span>
</code></pre><p><code>psiElement</code><span> and </span><code>project</code><span> are entrypoints allocated by the constructor. Visiting calculates the metric starting with the non-null one of them.</span></p><h5 id="Algorithm" data-id="Algorithm"><a class="anchor hidden-xs" href="#Algorithm" title="Algorithm"><span class="octicon octicon-link"></span></a><span>Algorithm</span></h5><h6 id="Visiting" data-id="Visiting"><a class="anchor hidden-xs" href="#Visiting" title="Visiting"><span class="octicon octicon-link"></span></a><span>Visiting</span></h6><p><code>Visiting</code><span> is realized through </span><code>visit()</code><span> method. When the </span><code>visit ()</code><span> method is called from the outside with the PSI object, the visiting process is executed by accepting the </span><code>visitor</code><span> from given element </span><sub><span>or project</span></sub><span>. Now, what we need to pay attention to is how visitng’s internal logic is implemented. As mentioned earlier, the </span><code>visit</code><span> methods of </span><code>visitor</code><span> have corresponding external </span><code>visit</code><span> methods. For example, </span><code>visitClass()</code><span> in </span><code>visitor</code><span> calls </span><code>visitClassMetric()</code><span>. Therefore, subclasses of </span><code>VisitingMetric</code><span> can customize the visiting logic by overriding </span><code>visit(.*)Metric()</code><span> methods.</span></p><h6 id="Calculating" data-id="Calculating"><a class="anchor hidden-xs" href="#Calculating" title="Calculating"><span class="octicon octicon-link"></span></a><span>Calculating</span></h6><p><span>Thanks to </span><code>visitor</code><span>, which has great versatility, we implemented calculating without much effort. We implemented the computational process to simply call </span><code>visit ()</code><span> from the instance’s entrypoints</span><sub><code>psiElement</code><span> or </span><code>project</code><span> </span></sub><span> and store the final result of that process.</span></p><h4 id="222-Codeline-Metric" data-id="222-Codeline-Metric"><a class="anchor hidden-xs" href="#222-Codeline-Metric" title="222-Codeline-Metric"><span class="octicon octicon-link"></span></a><span>2.2.2. Codeline Metric</span></h4><pre class="mermaid" data-processed="true"><svg id="mermaid-1639826920951" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="729" style="max-width: 786.16796875px;" viewBox="0 0 786.16796875 729"><style>#mermaid-1639826920951 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1639826920951 .error-icon{fill:#552222;}#mermaid-1639826920951 .error-text{fill:#552222;stroke:#552222;}#mermaid-1639826920951 .edge-thickness-normal{stroke-width:2px;}#mermaid-1639826920951 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1639826920951 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1639826920951 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1639826920951 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1639826920951 .marker{fill:#333333;stroke:#333333;}#mermaid-1639826920951 .marker.cross{stroke:#333333;}#mermaid-1639826920951 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1639826920951 g.classGroup text{fill:#9370DB;fill:#131300;stroke:none;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:10px;}#mermaid-1639826920951 g.classGroup text .title{font-weight:bolder;}#mermaid-1639826920951 .nodeLabel,#mermaid-1639826920951 .edgeLabel{color:#131300;}#mermaid-1639826920951 .edgeLabel .label rect{fill:#ECECFF;}#mermaid-1639826920951 .label text{fill:#131300;}#mermaid-1639826920951 .edgeLabel .label span{background:#ECECFF;}#mermaid-1639826920951 .classTitle{font-weight:bolder;}#mermaid-1639826920951 .node rect,#mermaid-1639826920951 .node circle,#mermaid-1639826920951 .node ellipse,#mermaid-1639826920951 .node polygon,#mermaid-1639826920951 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1639826920951 .divider{stroke:#9370DB;stroke:1;}#mermaid-1639826920951 g.clickable{cursor:pointer;}#mermaid-1639826920951 g.classGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaid-1639826920951 g.classGroup line{stroke:#9370DB;stroke-width:1;}#mermaid-1639826920951 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaid-1639826920951 .classLabel .label{fill:#9370DB;font-size:10px;}#mermaid-1639826920951 .relation{stroke:#333333;stroke-width:1;fill:none;}#mermaid-1639826920951 .dashed-line{stroke-dasharray:3;}#mermaid-1639826920951 #compositionStart,#mermaid-1639826920951 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826920951 #compositionEnd,#mermaid-1639826920951 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826920951 #dependencyStart,#mermaid-1639826920951 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826920951 #dependencyStart,#mermaid-1639826920951 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826920951 #extensionStart,#mermaid-1639826920951 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826920951 #extensionEnd,#mermaid-1639826920951 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826920951 #aggregationStart,#mermaid-1639826920951 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826920951 #aggregationEnd,#mermaid-1639826920951 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826920951 .edgeTerminals{font-size:11px;}#mermaid-1639826920951 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g transform="translate(0, 0)"><defs><marker id="classDiagram-aggregationStart" class="marker aggregation classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-aggregationEnd" class="marker aggregation classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-extensionStart" class="marker extension classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 1,7 L18,13 V 1 Z"></path></marker></defs><defs><marker id="classDiagram-extensionEnd" class="marker extension classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 1,1 V 13 L18,7 Z"></path></marker></defs><defs><marker id="classDiagram-compositionStart" class="marker composition classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-compositionEnd" class="marker composition classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-dependencyStart" class="marker dependency classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 5,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-dependencyEnd" class="marker dependency classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M423.2421875,97.375L423.2421875,103.47395833333333C423.2421875,109.57291666666667,423.2421875,121.77083333333333,423.2421875,133.96875C423.2421875,146.16666666666666,423.2421875,158.36458333333334,423.2421875,164.46354166666666L423.2421875,170.5625" id="id1" class="edge-pattern-solid relation" style="fill:none" marker-start="url(#classDiagram-extensionStart)"></path><path d="M491.6171875,256.7916472080578L518.9069010416666,267.94616434004814C546.1966145833334,279.1006814720385,600.7760416666666,301.4097157360193,628.0657552083334,318.66319120134295C655.35546875,335.9166666666667,655.35546875,348.1145833333333,655.35546875,354.2135416666667L655.35546875,360.3125" id="id2" class="edge-pattern-solid relation" style="fill:none" marker-start="url(#classDiagram-extensionStart)"></path><path d="M381.9606244799667,360.3125L388.8408849833056,354.2135416666667C395.7211454866445,348.1145833333333,409.4816664933223,335.9166666666667,416.3619269966611,323.71875C423.2421875,311.5208333333333,423.2421875,299.3229166666667,423.2421875,293.2239583333333L423.2421875,287.125" id="id3" class="edge-pattern-solid relation" style="fill:none" marker-start="url(#classDiagram-compositionStart)"></path><path d="M354.8671875,263.92681574277503L335.4453125,273.8921381189792C316.0234375,283.8574604951834,277.1796875,303.78810524759166,260.1165526260347,319.8523859571292C243.05341775206946,335.9166666666667,247.77089800413896,348.1145833333333,250.12963813017367,354.2135416666667L252.4883782562084,360.3125" id="id4" class="edge-pattern-solid relation" style="fill:none" marker-start="url(#classDiagram-extensionStart)"></path><path d="M160.72325528833846,531.25L151.81625440694873,537.3489583333334C142.90925352555897,543.4479166666666,125.09525176277948,555.6458333333334,116.18825088138975,572.375C107.28125,589.1041666666666,107.28125,610.3645833333334,107.28125,620.9947916666666L107.28125,631.625" id="id5" class="edge-pattern-solid relation" style="fill:none" marker-start="url(#classDiagram-extensionStart)"></path><path d="M410.36268221166154,531.25L419.2696830930513,537.3489583333334C428.176683974441,543.4479166666666,445.99068573722053,555.6458333333334,454.8976866186103,567.84375C463.8046875,580.0416666666666,463.8046875,592.2395833333334,463.8046875,598.3385416666666L463.8046875,604.4375" id="id6" class="edge-pattern-solid relation" style="fill:none" marker-start="url(#classDiagram-extensionStart)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(423.2421875, 133.96875)"><g class="label" transform="translate(-43.640625, -11.59375)"><foreignObject width="87.28125" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">implements</span></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(655.35546875, 323.71875)"><g class="label" transform="translate(-29.203125, -11.59375)"><foreignObject width="58.40625" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">extends</span></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(423.2421875, 323.71875)"><g class="label" transform="translate(-45.2109375, -11.59375)"><foreignObject width="90.421875" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">composition</span></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(238.3359375, 323.71875)"><g class="label" transform="translate(-29.203125, -11.59375)"><foreignObject width="58.40625" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">extends</span></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(107.28125, 567.84375)"><g class="label" transform="translate(-29.203125, -11.59375)"><foreignObject width="58.40625" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">extends</span></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(463.8046875, 567.84375)"><g class="label" transform="translate(-29.203125, -11.59375)"><foreignObject width="58.40625" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">extends</span></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="classid-Metric-53" transform="translate(423.2421875, 52.6875)"><rect class="outer title-state" x="-50.6015625" y="-44.6875" width="101.203125" height="89.375"></rect><line class="divider" x1="-50.6015625" x2="50.6015625" y1="17.6875" y2="17.6875"></line><line class="divider" x1="-50.6015625" x2="50.6015625" y1="33.6875" y2="33.6875"></line><g class="label"><foreignObject width="86.203125" height="23.1875" transform="translate( -43.1015625, -37.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">«interface»</span></div></foreignObject><foreignObject class="classTitle" width="49.359375" height="23.1875" transform="translate( -24.6796875, -10)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Metric</span></div></foreignObject></g></g><g class="node default" id="classid-CodeLineMetric-54" transform="translate(423.2421875, 228.84375)"><rect class="outer title-state" x="-68.375" y="-58.28125" width="136.75" height="116.5625"></rect><line class="divider" x1="-68.375" x2="68.375" y1="-23.09375" y2="-23.09375"></line><line class="divider" x1="-68.375" x2="68.375" y1="20.09375" y2="20.09375"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="121.75" height="23.1875" transform="translate( -60.875, -50.78125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">CodeLineMetric</span></div></foreignObject><foreignObject width="99.1875" height="23.1875" transform="translate( -60.875, -11.59375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-int codeLine</span></div></foreignObject><foreignObject width="119.671875" height="23.1875" transform="translate( -60.875, 27.59375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+getId() : String</span></div></foreignObject></g></g><g class="node default" id="classid-CompositeCodeLineMetric-55" transform="translate(285.54296875, 445.78125)"><rect class="outer title-state" x="-197" y="-85.46875" width="394" height="170.9375"></rect><line class="divider" x1="-197" x2="197" y1="-50.28125" y2="-50.28125"></line><line class="divider" x1="-197" x2="197" y1="-7.09375" y2="-7.09375"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="203.078125" height="23.1875" transform="translate( -101.5390625, -77.96875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">CompositeCodeLineMetric</span></div></foreignObject><foreignObject width="292.859375" height="23.1875" transform="translate( -189.5, -38.78125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-List&lt;CodeLineMetric&gt; codeLineMetrics</span></div></foreignObject><foreignObject width="379" height="23.1875" transform="translate( -189.5, 0.40625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+addMetric(CodeLineMetric codeLineMetric) : void</span></div></foreignObject><foreignObject width="230.625" height="23.1875" transform="translate( -189.5, 27.59375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+checkDegradation() : boolean</span></div></foreignObject><foreignObject width="101.90625" height="23.1875" transform="translate( -189.5, 54.78125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+save() : void</span></div></foreignObject></g></g><g class="node default" id="classid-PackageCodeLineMetric-56" transform="translate(107.28125, 662.71875)"><rect class="outer title-state" x="-99.28125" y="-31.09375" width="198.5625" height="62.1875"></rect><line class="divider" x1="-99.28125" x2="99.28125" y1="4.09375" y2="4.09375"></line><line class="divider" x1="-99.28125" x2="99.28125" y1="20.09375" y2="20.09375"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="183.5625" height="23.1875" transform="translate( -91.78125, -23.59375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">PackageCodeLineMetric</span></div></foreignObject></g></g><g class="node default" id="classid-ProjectCodeLineMetric-57" transform="translate(463.8046875, 662.71875)"><rect class="outer title-state" x="-207.2421875" y="-58.28125" width="414.484375" height="116.5625"></rect><line class="divider" x1="-207.2421875" x2="207.2421875" y1="-23.09375" y2="-23.09375"></line><line class="divider" x1="-207.2421875" x2="207.2421875" y1="-7.09375" y2="-7.09375"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="179.078125" height="23.1875" transform="translate( -89.5390625, -50.78125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">ProjectCodeLineMetric</span></div></foreignObject><foreignObject width="217.421875" height="23.1875" transform="translate( -199.7421875, 0.40625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+getActiveProject() : Project</span></div></foreignObject><foreignObject width="399.484375" height="23.1875" transform="translate( -199.7421875, 27.59375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+getRootPackages(Project project) : Set&lt;PsiPackage&gt;</span></div></foreignObject></g></g><g class="node default" id="classid-ClassCodeLineMetric-58" transform="translate(655.35546875, 445.78125)"><rect class="outer title-state" x="-122.8125" y="-85.46875" width="245.625" height="170.9375"></rect><line class="divider" x1="-122.8125" x2="122.8125" y1="-50.28125" y2="-50.28125"></line><line class="divider" x1="-122.8125" x2="122.8125" y1="20.09375" y2="20.09375"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="160.3125" height="23.1875" transform="translate( -80.15625, -77.96875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">ClassCodeLineMetric</span></div></foreignObject><foreignObject width="128.21875" height="23.1875" transform="translate( -115.3125, -38.78125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-PsiClass psiClass</span></div></foreignObject><foreignObject width="178.625" height="23.1875" transform="translate( -115.3125, -11.59375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-WarningCondition cond</span></div></foreignObject><foreignObject width="230.625" height="23.1875" transform="translate( -115.3125, 27.59375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+checkDegradation() : boolean</span></div></foreignObject><foreignObject width="101.90625" height="23.1875" transform="translate( -115.3125, 54.78125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+save() : void</span></div></foreignObject></g></g></g></g></g></svg></pre><h5 id="Structure1" data-id="Structure"><a class="anchor hidden-xs" href="#Structure1" title="Structure1"><span class="octicon octicon-link"></span></a><span>Structure</span></h5><p><code>CodeLineMetric</code><span> implements interface </span><code>Metric</code><span>. We use </span><code>ProjectCodeLineMetric</code><span>, </span><code>PackageCodeLineMetric</code><span>, and </span><code>ClassCodeLineMetric</code><span> for counting each code lines of project, package, and class. </span><code>ProjectCodeLineMetric</code><span> and </span><code>PackageCodeLineMetric</code><span> extend </span><code>CompositeCodeLineMetric</code><span> which holds </span><code>List&lt;CodeLineMetric&gt;</code><span>as field.</span></p><h5 id="Algorithm1" data-id="Algorithm"><a class="anchor hidden-xs" href="#Algorithm1" title="Algorithm1"><span class="octicon octicon-link"></span></a><span>Algorithm</span></h5><p><span>Opened project parsed to </span><code>ProjectCodeLineMetric</code><span> with </span><code>getActiveProject()</code><span>. Then using </span><code>getRootPackages()</code><span> and </span><code>addMetric()</code><span>, </span><code>PackageCodeLineMetric</code><span> per each subPackages add to codeLineMetrics of </span><code>ProjectCodeLineMetric</code><span>. Similarly, each classes and subPackages of package add to </span><code>codeLineMetrics</code><span> of </span><code>PackageCodeLineMetric</code><span> at it’s creation.</span></p><p><span>In </span><code>calculate()</code><span> of </span><code>ClassCodeLineMetric</code><span>, getting </span><code>String</code><span> form of Metric’s </span><code>PsiClass</code><span>, dividing and counting based on line break calculate lines of class. Furthermore, in </span><code>CompositeCodeLineMetric</code><span>, simply calling and summing up each returns of </span><code>CodeLineMetric</code><span>’s </span><code>calculate()</code><span> in </span><code>codeLineMetrics</code><span> calculate lines of package or project.</span></p><h4 id="223-Halstead-Metric" data-id="223-Halstead-Metric"><a class="anchor hidden-xs" href="#223-Halstead-Metric" title="223-Halstead-Metric"><span class="octicon octicon-link"></span></a><span>2.2.3. Halstead Metric</span></h4><pre class="mermaid" data-processed="true"><svg id="mermaid-1639826674514" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="647.4375" style="max-width: 635.140625px;" viewBox="0 0 635.140625 647.4375"><style>#mermaid-1639826674514 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1639826674514 .error-icon{fill:#552222;}#mermaid-1639826674514 .error-text{fill:#552222;stroke:#552222;}#mermaid-1639826674514 .edge-thickness-normal{stroke-width:2px;}#mermaid-1639826674514 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1639826674514 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1639826674514 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1639826674514 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1639826674514 .marker{fill:#333333;stroke:#333333;}#mermaid-1639826674514 .marker.cross{stroke:#333333;}#mermaid-1639826674514 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1639826674514 g.classGroup text{fill:#9370DB;fill:#131300;stroke:none;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:10px;}#mermaid-1639826674514 g.classGroup text .title{font-weight:bolder;}#mermaid-1639826674514 .nodeLabel,#mermaid-1639826674514 .edgeLabel{color:#131300;}#mermaid-1639826674514 .edgeLabel .label rect{fill:#ECECFF;}#mermaid-1639826674514 .label text{fill:#131300;}#mermaid-1639826674514 .edgeLabel .label span{background:#ECECFF;}#mermaid-1639826674514 .classTitle{font-weight:bolder;}#mermaid-1639826674514 .node rect,#mermaid-1639826674514 .node circle,#mermaid-1639826674514 .node ellipse,#mermaid-1639826674514 .node polygon,#mermaid-1639826674514 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1639826674514 .divider{stroke:#9370DB;stroke:1;}#mermaid-1639826674514 g.clickable{cursor:pointer;}#mermaid-1639826674514 g.classGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaid-1639826674514 g.classGroup line{stroke:#9370DB;stroke-width:1;}#mermaid-1639826674514 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaid-1639826674514 .classLabel .label{fill:#9370DB;font-size:10px;}#mermaid-1639826674514 .relation{stroke:#333333;stroke-width:1;fill:none;}#mermaid-1639826674514 .dashed-line{stroke-dasharray:3;}#mermaid-1639826674514 #compositionStart,#mermaid-1639826674514 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674514 #compositionEnd,#mermaid-1639826674514 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674514 #dependencyStart,#mermaid-1639826674514 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674514 #dependencyStart,#mermaid-1639826674514 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674514 #extensionStart,#mermaid-1639826674514 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674514 #extensionEnd,#mermaid-1639826674514 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674514 #aggregationStart,#mermaid-1639826674514 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674514 #aggregationEnd,#mermaid-1639826674514 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674514 .edgeTerminals{font-size:11px;}#mermaid-1639826674514 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g transform="translate(0, 0)"><defs><marker id="classDiagram-aggregationStart" class="marker aggregation classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-aggregationEnd" class="marker aggregation classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-extensionStart" class="marker extension classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 1,7 L18,13 V 1 Z"></path></marker></defs><defs><marker id="classDiagram-extensionEnd" class="marker extension classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 1,1 V 13 L18,7 Z"></path></marker></defs><defs><marker id="classDiagram-compositionStart" class="marker composition classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-compositionEnd" class="marker composition classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-dependencyStart" class="marker dependency classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 5,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-dependencyEnd" class="marker dependency classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M161.4765625,449.6875L161.4765625,455.7864583333333C161.4765625,461.8854166666667,161.4765625,474.0833333333333,172.23034587553525,486.28125C182.9841292510705,498.4791666666667,204.491696002141,510.6770833333333,215.24547937767625,516.7760416666666L225.99926275321147,522.875" id="id1" class="edge-pattern-solid relation" style="fill:none" marker-start="url(#classDiagram-extensionStart)"></path><path d="M496.046875,70.1875L496.046875,76.28645833333333C496.046875,82.38541666666667,496.046875,94.58333333333333,496.046875,106.78125C496.046875,118.97916666666667,496.046875,131.17708333333334,496.046875,137.27604166666666L496.046875,143.375" id="id2" class="edge-pattern-solid relation" style="fill:none" marker-start="url(#classDiagram-extensionStart)"></path><path d="M496.046875,232.75L496.046875,238.84895833333334C496.046875,244.94791666666666,496.046875,257.1458333333333,496.046875,271.609375C496.046875,286.0729166666667,496.046875,302.8020833333333,496.046875,311.1666666666667L496.046875,319.53125" id="id3" class="edge-pattern-solid relation" style="fill:none" marker-start="url(#classDiagram-extensionStart)"></path><path d="M496.046875,436.09375L496.046875,444.4583333333333C496.046875,452.8229166666667,496.046875,469.5520833333333,485.29309162446475,484.015625C474.5393082489295,498.4791666666667,453.031741497859,510.6770833333333,442.27795812232375,516.7760416666666L431.5241747467885,522.875" id="id4" class="edge-pattern-solid relation" style="fill:none" marker-start="url(#classDiagram-extensionStart)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(161.4765625, 486.28125)"><g class="label" transform="translate(-29.203125, -11.59375)"><foreignObject width="58.40625" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">extends</span></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(496.046875, 106.78125)"><g class="label" transform="translate(-29.203125, -11.59375)"><foreignObject width="58.40625" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">extends</span></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(496.046875, 269.34375)"><g class="label" transform="translate(-27.640625, -11.59375)"><foreignObject width="55.28125" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">creates</span></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(496.046875, 486.28125)"><g class="label" transform="translate(-27.640625, -11.59375)"><foreignObject width="55.28125" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">creates</span></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="classid-VisitingMetric-18" transform="translate(161.4765625, 377.8125)"><rect class="outer title-state" x="-153.4765625" y="-71.875" width="306.953125" height="143.75"></rect><line class="divider" x1="-153.4765625" x2="153.4765625" y1="-36.6875" y2="-36.6875"></line><line class="divider" x1="-153.4765625" x2="153.4765625" y1="33.6875" y2="33.6875"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="106.859375" height="23.1875" transform="translate( -53.4296875, -64.375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">VisitingMetric</span></div></foreignObject><foreignObject width="191.828125" height="23.1875" transform="translate( -145.9765625, -25.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+PsiElementVisitor visitor</span></div></foreignObject><foreignObject width="141.921875" height="23.1875" transform="translate( -145.9765625, 2)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+double visitResult</span></div></foreignObject><foreignObject width="291.953125" height="23.1875" transform="translate( -145.9765625, 41.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+visitElementMetric(PsiElement) : void</span></div></foreignObject></g></g><g class="node default" id="classid-HalsteadMetric-19" transform="translate(328.76171875, 581.15625)"><rect class="outer title-state" x="-148.9375" y="-58.28125" width="297.875" height="116.5625"></rect><line class="divider" x1="-148.9375" x2="148.9375" y1="-23.09375" y2="-23.09375"></line><line class="divider" x1="-148.9375" x2="148.9375" y1="-7.09375" y2="-7.09375"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="116.59375" height="23.1875" transform="translate( -58.296875, -50.78125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">HalsteadMetric</span></div></foreignObject><foreignObject width="230.96875" height="23.1875" transform="translate( -141.4375, 0.40625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+save(CalcHistoryModel) : void</span></div></foreignObject><foreignObject width="282.875" height="23.1875" transform="translate( -141.4375, 27.59375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+visitElementMetric(PsiElemnt) : void</span></div></foreignObject></g></g><g class="node default" id="classid-HalsteadParser-20" transform="translate(496.046875, 377.8125)"><rect class="outer title-state" x="-131.09375" y="-58.28125" width="262.1875" height="116.5625"></rect><line class="divider" x1="-131.09375" x2="131.09375" y1="-23.09375" y2="-23.09375"></line><line class="divider" x1="-131.09375" x2="131.09375" y1="-7.09375" y2="-7.09375"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="116.25" height="23.1875" transform="translate( -58.125, -50.78125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">HalsteadParser</span></div></foreignObject><foreignObject width="247.1875" height="23.1875" transform="translate( -123.59375, 0.40625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+parse(PsiMethod method) : void</span></div></foreignObject><foreignObject width="158.921875" height="23.1875" transform="translate( -123.59375, 27.59375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+getHalsteadVisitor()</span></div></foreignObject></g></g><g class="node default" id="classid-HalsteadVisitor-21" transform="translate(496.046875, 188.0625)"><rect class="outer title-state" x="-126.1796875" y="-44.6875" width="252.359375" height="89.375"></rect><line class="divider" x1="-126.1796875" x2="126.1796875" y1="-9.5" y2="-9.5"></line><line class="divider" x1="-126.1796875" x2="126.1796875" y1="6.5" y2="6.5"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="118" height="23.1875" transform="translate( -59, -37.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">HalsteadVisitor</span></div></foreignObject><foreignObject width="237.359375" height="23.1875" transform="translate( -118.6796875, 14)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+boolean visit(Expression node)</span></div></foreignObject></g></g><g class="node default" id="classid-ASTVisitor-22" transform="translate(496.046875, 39.09375)"><rect class="outer title-state" x="-47.46875" y="-31.09375" width="94.9375" height="62.1875"></rect><line class="divider" x1="-47.46875" x2="47.46875" y1="4.09375" y2="4.09375"></line><line class="divider" x1="-47.46875" x2="47.46875" y1="20.09375" y2="20.09375"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="79.9375" height="23.1875" transform="translate( -39.96875, -23.59375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">ASTVisitor</span></div></foreignObject></g></g></g></g></g></svg></pre><h5 id="Structure2" data-id="Structure"><a class="anchor hidden-xs" href="#Structure2" title="Structure2"><span class="octicon octicon-link"></span></a><span>Structure</span></h5><p><code>HalsteadMetric</code><span> is created by extending from VisitingMetric. It leverages </span><code>visitElemenMetric(PsiElement)</code><span>for visiting packages, classes and methods. For counting the total and unique numbers of operands and operators, we use </span><code>HalsteadVisitor</code><span> extending </span><code>org.eclipse.jdt.core.dom.ASTVisitor</code><span> in order to visit PrefixExpression, PostfixExpressions, etc. and </span><code>HalsteadParser</code><span> to parse the PsiMethod.</span></p><h5 id="Algorithm2" data-id="Algorithm"><a class="anchor hidden-xs" href="#Algorithm2" title="Algorithm2"><span class="octicon octicon-link"></span></a><span>Algorithm</span></h5><p><span>When visiting and parsing all methods, we calculate the following four values:</span></p><ul>
<li><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-1-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 119%; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>N</mi><mn>1</mn></msub></math>" role="presentation"><span id="MJXc-Node-1" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-2" class="mjx-mrow"><span id="MJXc-Node-3" class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.085em;"><span id="MJXc-Node-4" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.475em; padding-bottom: 0.265em; padding-right: 0.085em;">N</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-5" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.37em; padding-bottom: 0.318em;">1</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>N</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-1">N_1</script></span>
<ul>
<li><code>numberTotalOperators</code></li>
</ul>
</li>
<li><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-2-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 119%; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>n</mi><mn>1</mn></msub></math>" role="presentation"><span id="MJXc-Node-6" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-7" class="mjx-mrow"><span id="MJXc-Node-8" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-9" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-10" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.37em; padding-bottom: 0.318em;">1</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>n</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-2">n_1</script></span>
<ul>
<li><code>numberUniqueOperators</code></li>
</ul>
</li>
<li><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-3-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>N</mi><mn>2</mn></msub></math>" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-11" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-12" class="mjx-mrow"><span id="MJXc-Node-13" class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.085em;"><span id="MJXc-Node-14" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.475em; padding-bottom: 0.265em; padding-right: 0.085em;">N</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-15" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.37em; padding-bottom: 0.318em;">2</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>N</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-3">N_2</script></span>
<ul>
<li><code>numberTotalOperands</code></li>
</ul>
</li>
<li><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-4-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>n</mi><mn>2</mn></msub></math>" role="presentation" style="font-size: 119%; position: relative;"><span id="MJXc-Node-16" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-17" class="mjx-mrow"><span id="MJXc-Node-18" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-19" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.213em; padding-bottom: 0.265em;">n</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-20" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.37em; padding-bottom: 0.318em;">2</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>n</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-4">n_2</script></span>
<ul>
<li><code>numberUniqueOperands</code></li>
</ul>
</li>
</ul><p><span>We can then calculate thes values for Halstead Metrics, however only four of them are shown in GUI, namely </span><code>VOCABULARY</code><span>, </span><code>VOLUME</code><span>, </span><code>DIFFICULTY</code><span>and </span><code>EFFORT</code><span>. We are using </span><code>HalsteadMetricCalculator</code><span> for that:</span></p><pre class="mermaid" data-processed="true"><svg id="mermaid-1639826674559" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="268.5" style="max-width: 227.234375px;" viewBox="0 0 227.234375 268.5"><style>#mermaid-1639826674559 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1639826674559 .error-icon{fill:#552222;}#mermaid-1639826674559 .error-text{fill:#552222;stroke:#552222;}#mermaid-1639826674559 .edge-thickness-normal{stroke-width:2px;}#mermaid-1639826674559 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1639826674559 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1639826674559 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1639826674559 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1639826674559 .marker{fill:#333333;stroke:#333333;}#mermaid-1639826674559 .marker.cross{stroke:#333333;}#mermaid-1639826674559 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1639826674559 g.classGroup text{fill:#9370DB;fill:#131300;stroke:none;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:10px;}#mermaid-1639826674559 g.classGroup text .title{font-weight:bolder;}#mermaid-1639826674559 .nodeLabel,#mermaid-1639826674559 .edgeLabel{color:#131300;}#mermaid-1639826674559 .edgeLabel .label rect{fill:#ECECFF;}#mermaid-1639826674559 .label text{fill:#131300;}#mermaid-1639826674559 .edgeLabel .label span{background:#ECECFF;}#mermaid-1639826674559 .classTitle{font-weight:bolder;}#mermaid-1639826674559 .node rect,#mermaid-1639826674559 .node circle,#mermaid-1639826674559 .node ellipse,#mermaid-1639826674559 .node polygon,#mermaid-1639826674559 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1639826674559 .divider{stroke:#9370DB;stroke:1;}#mermaid-1639826674559 g.clickable{cursor:pointer;}#mermaid-1639826674559 g.classGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaid-1639826674559 g.classGroup line{stroke:#9370DB;stroke-width:1;}#mermaid-1639826674559 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaid-1639826674559 .classLabel .label{fill:#9370DB;font-size:10px;}#mermaid-1639826674559 .relation{stroke:#333333;stroke-width:1;fill:none;}#mermaid-1639826674559 .dashed-line{stroke-dasharray:3;}#mermaid-1639826674559 #compositionStart,#mermaid-1639826674559 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674559 #compositionEnd,#mermaid-1639826674559 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674559 #dependencyStart,#mermaid-1639826674559 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674559 #dependencyStart,#mermaid-1639826674559 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674559 #extensionStart,#mermaid-1639826674559 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674559 #extensionEnd,#mermaid-1639826674559 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674559 #aggregationStart,#mermaid-1639826674559 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674559 #aggregationEnd,#mermaid-1639826674559 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674559 .edgeTerminals{font-size:11px;}#mermaid-1639826674559 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g transform="translate(0, 0)"><defs><marker id="classDiagram-aggregationStart" class="marker aggregation classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-aggregationEnd" class="marker aggregation classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-extensionStart" class="marker extension classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 1,7 L18,13 V 1 Z"></path></marker></defs><defs><marker id="classDiagram-extensionEnd" class="marker extension classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 1,1 V 13 L18,7 Z"></path></marker></defs><defs><marker id="classDiagram-compositionStart" class="marker composition classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-compositionEnd" class="marker composition classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-dependencyStart" class="marker dependency classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 5,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-dependencyEnd" class="marker dependency classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g class="node default" id="classid-HalsteadMetricCalculator-24" transform="translate(113.6171875, 134.25)"><rect class="outer title-state" x="-105.6171875" y="-126.25" width="211.234375" height="252.5"></rect><line class="divider" x1="-105.6171875" x2="105.6171875" y1="-91.0625" y2="-91.0625"></line><line class="divider" x1="-105.6171875" x2="105.6171875" y1="-75.0625" y2="-75.0625"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="196.234375" height="23.1875" transform="translate( -98.1171875, -118.75)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">HalsteadMetricCalculator</span></div></foreignObject><foreignObject width="152.890625" height="23.1875" transform="translate( -98.1171875, -67.5625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+int getVocabulary()</span></div></foreignObject><foreignObject width="101.203125" height="23.1875" transform="translate( -98.1171875, -40.375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+int getSize()</span></div></foreignObject><foreignObject width="155.75" height="23.1875" transform="translate( -98.1171875, -13.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+double getVolume()</span></div></foreignObject><foreignObject width="171.109375" height="23.1875" transform="translate( -98.1171875, 14)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+double getDifficulty()</span></div></foreignObject><foreignObject width="151.6875" height="23.1875" transform="translate( -98.1171875, 41.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+double getEfforts()</span></div></foreignObject><foreignObject width="145.609375" height="23.1875" transform="translate( -98.1171875, 68.375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+double getErrors()</span></div></foreignObject><foreignObject width="190.453125" height="23.1875" transform="translate( -98.1171875, 95.5625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+double getTestingTime()</span></div></foreignObject></g></g></g></g></g></svg></pre><h4 id="224-Cyclomatic-Metric" data-id="224-Cyclomatic-Metric"><a class="anchor hidden-xs" href="#224-Cyclomatic-Metric" title="224-Cyclomatic-Metric"><span class="octicon octicon-link"></span></a><span>2.2.4. Cyclomatic Metric</span></h4><pre class="mermaid" data-processed="true"><svg id="mermaid-1639826674583" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="349.5" style="max-width: 322.953125px;" viewBox="0 0 322.953125 349.5"><style>#mermaid-1639826674583 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1639826674583 .error-icon{fill:#552222;}#mermaid-1639826674583 .error-text{fill:#552222;stroke:#552222;}#mermaid-1639826674583 .edge-thickness-normal{stroke-width:2px;}#mermaid-1639826674583 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1639826674583 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1639826674583 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1639826674583 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1639826674583 .marker{fill:#333333;stroke:#333333;}#mermaid-1639826674583 .marker.cross{stroke:#333333;}#mermaid-1639826674583 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1639826674583 g.classGroup text{fill:#9370DB;fill:#131300;stroke:none;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:10px;}#mermaid-1639826674583 g.classGroup text .title{font-weight:bolder;}#mermaid-1639826674583 .nodeLabel,#mermaid-1639826674583 .edgeLabel{color:#131300;}#mermaid-1639826674583 .edgeLabel .label rect{fill:#ECECFF;}#mermaid-1639826674583 .label text{fill:#131300;}#mermaid-1639826674583 .edgeLabel .label span{background:#ECECFF;}#mermaid-1639826674583 .classTitle{font-weight:bolder;}#mermaid-1639826674583 .node rect,#mermaid-1639826674583 .node circle,#mermaid-1639826674583 .node ellipse,#mermaid-1639826674583 .node polygon,#mermaid-1639826674583 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1639826674583 .divider{stroke:#9370DB;stroke:1;}#mermaid-1639826674583 g.clickable{cursor:pointer;}#mermaid-1639826674583 g.classGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaid-1639826674583 g.classGroup line{stroke:#9370DB;stroke-width:1;}#mermaid-1639826674583 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaid-1639826674583 .classLabel .label{fill:#9370DB;font-size:10px;}#mermaid-1639826674583 .relation{stroke:#333333;stroke-width:1;fill:none;}#mermaid-1639826674583 .dashed-line{stroke-dasharray:3;}#mermaid-1639826674583 #compositionStart,#mermaid-1639826674583 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674583 #compositionEnd,#mermaid-1639826674583 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674583 #dependencyStart,#mermaid-1639826674583 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674583 #dependencyStart,#mermaid-1639826674583 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674583 #extensionStart,#mermaid-1639826674583 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674583 #extensionEnd,#mermaid-1639826674583 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674583 #aggregationStart,#mermaid-1639826674583 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674583 #aggregationEnd,#mermaid-1639826674583 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826674583 .edgeTerminals{font-size:11px;}#mermaid-1639826674583 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g transform="translate(0, 0)"><defs><marker id="classDiagram-aggregationStart" class="marker aggregation classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-aggregationEnd" class="marker aggregation classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-extensionStart" class="marker extension classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 1,7 L18,13 V 1 Z"></path></marker></defs><defs><marker id="classDiagram-extensionEnd" class="marker extension classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 1,1 V 13 L18,7 Z"></path></marker></defs><defs><marker id="classDiagram-compositionStart" class="marker composition classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-compositionEnd" class="marker composition classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-dependencyStart" class="marker dependency classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 5,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-dependencyEnd" class="marker dependency classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M161.4765625,151.75L161.4765625,157.84895833333334C161.4765625,163.94791666666666,161.4765625,176.14583333333334,161.4765625,188.34375C161.4765625,200.54166666666666,161.4765625,212.73958333333334,161.4765625,218.83854166666666L161.4765625,224.9375" id="id1" class="edge-pattern-solid relation" style="fill:none" marker-start="url(#classDiagram-extensionStart)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(161.4765625, 188.34375)"><g class="label" transform="translate(-29.203125, -11.59375)"><foreignObject width="58.40625" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">extends</span></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="classid-VisitingMetric-27" transform="translate(161.4765625, 79.875)"><rect class="outer title-state" x="-153.4765625" y="-71.875" width="306.953125" height="143.75"></rect><line class="divider" x1="-153.4765625" x2="153.4765625" y1="-36.6875" y2="-36.6875"></line><line class="divider" x1="-153.4765625" x2="153.4765625" y1="33.6875" y2="33.6875"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="106.859375" height="23.1875" transform="translate( -53.4296875, -64.375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">VisitingMetric</span></div></foreignObject><foreignObject width="191.828125" height="23.1875" transform="translate( -145.9765625, -25.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+PsiElementVisitor visitor</span></div></foreignObject><foreignObject width="141.921875" height="23.1875" transform="translate( -145.9765625, 2)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+double visitResult</span></div></foreignObject><foreignObject width="291.953125" height="23.1875" transform="translate( -145.9765625, 41.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+visitElementMetric(PsiElement) : void</span></div></foreignObject></g></g><g class="node default" id="classid-CyclomaticMetric-28" transform="translate(161.4765625, 283.21875)"><rect class="outer title-state" x="-148.9375" y="-58.28125" width="297.875" height="116.5625"></rect><line class="divider" x1="-148.9375" x2="148.9375" y1="-23.09375" y2="-23.09375"></line><line class="divider" x1="-148.9375" x2="148.9375" y1="-7.09375" y2="-7.09375"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="134.734375" height="23.1875" transform="translate( -67.3671875, -50.78125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">CyclomaticMetric</span></div></foreignObject><foreignObject width="230.96875" height="23.1875" transform="translate( -141.4375, 0.40625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+save(CalcHistoryModel) : void</span></div></foreignObject><foreignObject width="282.875" height="23.1875" transform="translate( -141.4375, 27.59375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+visitElementMetric(PsiElemnt) : void</span></div></foreignObject></g></g></g></g></g></svg></pre><h5 id="Structure3" data-id="Structure"><a class="anchor hidden-xs" href="#Structure3" title="Structure3"><span class="octicon octicon-link"></span></a><span>Structure</span></h5><p><code>CyclomaticMetric</code><span> is created by extending from VisitingMetric. It uses visitor pattern of VisitingMetric. Also </span><strong><span>Psi(Program structure interface)</span></strong><span> which provide </span><strong><span>Abstract Syntax Tree</span></strong><span> of java code by parsing is used for calculation of Cyclomatic Metric. We implemented each visitElement function (i.e. visitClassMetric, visitIfStatementMetric) to invoke psi-visit function.</span></p><h5 id="Algorithm3" data-id="Algorithm"><a class="anchor hidden-xs" href="#Algorithm3" title="Algorithm3"><span class="octicon octicon-link"></span></a><span>Algorithm</span></h5><p><span>Definition of Cyclomatic Complex is </span><code>#branch + 1</code><span>. so, we define the branch are</span></p><ul>
<li><span>If / Else-If</span></li>
<li><span>Switch-case (# of each cases except default)</span></li>
<li><span>Assert statement</span></li>
<li><span>Try-catch</span></li>
<li><span>Conditional operatior (i.e. </span><code>x = y &gt; 3 ? a : b</code><span>)</span></li>
<li><span>While / Do-while</span></li>
<li><span>For / Foreach</span></li>
</ul><pre><code class="java hljs">    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">visitIfStatementMetric</span><span class="token punctuation">(</span><span class="token class-name">PsiIfStatement</span> statement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setVisitResult</span><span class="token punctuation">(</span><span class="token function">getVisitResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">requireNonNullElse</span><span class="token punctuation">(</span>statement<span class="token punctuation">.</span><span class="token function">getCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>visitor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">requireNonNullElse</span><span class="token punctuation">(</span>statement<span class="token punctuation">.</span><span class="token function">getThenBranch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>visitor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">requireNonNullElse</span><span class="token punctuation">(</span>statement<span class="token punctuation">.</span><span class="token function">getElseBranch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>visitor<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><p><span>For exmaple, like above code we override all of visitFunction. if visitor visit some function related branch statement, we add the branch count. Then, accept visitor for child statement of that.</span></p><h4 id="225-Warning-System" data-id="225-Warning-System"><a class="anchor hidden-xs" href="#225-Warning-System" title="225-Warning-System"><span class="octicon octicon-link"></span></a><span>2.2.5 Warning System</span></h4><h5 id="ProjectToolWindow" data-id="ProjectToolWindow"><a class="anchor hidden-xs" href="#ProjectToolWindow" title="ProjectToolWindow"><span class="octicon octicon-link"></span></a><span>ProjectToolWindow</span></h5><h6 id="Constructor" data-id="Constructor"><a class="anchor hidden-xs" href="#Constructor" title="Constructor"><span class="octicon octicon-link"></span></a><span>Constructor</span></h6><pre><code class="java hljs"><span class="token comment">// ...</span>
<span class="token class-name">ActionListener</span> calculateAndSaveListener <span class="token operator">=</span> e <span class="token operator">-&gt;</span> <span class="token function">backgroundOperation</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">doMetricsCalculation</span><span class="token punctuation">(</span>popupBuilder<span class="token punctuation">,</span> window<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">doMetricsSave</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

buttonCalcAndSave<span class="token punctuation">.</span><span class="token function">addActionListener</span><span class="token punctuation">(</span>calculateAndSaveListener<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
</code></pre><p><span>In the constructor of </span><code>ProjectToolWindow</code><span>, an </span><code>ActionListener</code><span> is added to the ‘Calculate Metrics’ button. When a user clicks this button, this </span><code>ActionListener</code><span> is executed, so all the values are calculated and saved automatically.</span></p><h6 id="doMetricsCalculation" data-id="doMetricsCalculation"><a class="anchor hidden-xs" href="#doMetricsCalculation" title="doMetricsCalculation"><span class="octicon octicon-link"></span></a><span>doMetricsCalculation()</span></h6><pre><code class="java hljs"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">doMetricsCalculation</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token class-name">MetricWindow</span> window<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Metric<span class="token punctuation">.</span>Type</span><span class="token punctuation">&gt;</span></span> warnMetric <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Metric<span class="token punctuation">.</span>Type</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Metric<span class="token punctuation">.</span>Type</span> metric <span class="token operator">:</span> <span class="token class-name">Metric<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">boolean</span> warning <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

        <span class="token class-name">Metric</span><span class="token punctuation">[</span><span class="token punctuation">]</span> subMetrics <span class="token operator">=</span> metricList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>metric<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Metric</span> subMetric <span class="token operator">:</span> subMetrics<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            subMetric<span class="token punctuation">.</span><span class="token function">calculate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            warning <span class="token operator">=</span> warning <span class="token operator">||</span> subMetric<span class="token punctuation">.</span><span class="token function">checkDegradation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>warning<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            warnMetric<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>metric<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//...</span>
    
    window<span class="token punctuation">.</span><span class="token function">setMetrics</span><span class="token punctuation">(</span>warnMetric<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p><span>This method is responsible for calculating &amp; warning. Each </span><code>Metric</code><span> object calls </span><code>calculate()</code><span> and </span><code>checkDegradation()</code><span> to calculate and check if there is any degraded value in each </span><code>Metric</code><span>. In </span><code>setMetrics()</code><span> of </span><code>MetricWindow</code><span>, each </span><code>BaseMetric</code><span> object calls </span><code>getDegradedMetrics()</code><span> method.</span></p><h5 id="BaseMetric" data-id="BaseMetric"><a class="anchor hidden-xs" href="#BaseMetric" title="BaseMetric"><span class="octicon octicon-link"></span></a><span>BaseMetric</span></h5><h6 id="getDegradedMetrics" data-id="getDegradedMetrics"><a class="anchor hidden-xs" href="#getDegradedMetrics" title="getDegradedMetrics"><span class="octicon octicon-link"></span></a><span>getDegradedMetrics()</span></h6><pre><code class="java hljs"><span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Set</span><span class="token punctuation">&lt;</span><span class="token class-name">PsiMethod</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">getDegradationMetrics</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Set</span><span class="token punctuation">&lt;</span><span class="token class-name">PsiMethod</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> degradedMetrics <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MetricModel</span><span class="token punctuation">&gt;</span></span> metricModels <span class="token operator">=</span> <span class="token class-name">MetricService</span><span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token function">getID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
                                                        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMetricModels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> psiClass <span class="token operator">:</span> metrics<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PsiMethod</span> psiMethod <span class="token operator">:</span> metrics<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>psiClass<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// ...</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MetricModel</span><span class="token punctuation">&gt;</span></span> subMetricModels <span class="token operator">=</span> <span class="token comment">// ...</span>

            <span class="token class-name">Double</span> newValue <span class="token operator">=</span> metrics<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>psiClass<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>psiMethod<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Double</span> oldValue<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>subMetricModels<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                oldValue <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                oldValue <span class="token operator">=</span> subMetricModels<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFigure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>cond<span class="token punctuation">.</span><span class="token function">shouldWarn</span><span class="token punctuation">(</span>oldValue<span class="token punctuation">,</span> newValue<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                degradedMetrics<span class="token punctuation">.</span><span class="token function">putIfAbsent</span><span class="token punctuation">(</span>psiClass<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                degradedMetrics<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>psiClass<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>psiMethod<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableMap</span><span class="token punctuation">(</span>degradedMetrics<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p><span>In each </span><code>BaseMetic</code><span> object, this method returns all the degraded classes and methods. In order to check if they are degraded, the current value can be compared to the latest value in database or to the fixed threshold for each metric type. With the returned </span><code>Map</code><span> of all the degraded classes and methods, </span><code>MetricWindow</code><span> object can highlight all the degraded values.</span></p><h3 id="23-GUI" data-id="23-GUI"><a class="anchor hidden-xs" href="#23-GUI" title="23-GUI"><span class="octicon octicon-link"></span></a><span>2.3. GUI</span></h3><p><span>The user can interact with our plugin the following ways:</span></p><ul>
<li><span>Show and hide the plugin side panel.</span></li>
<li><span>Click on the button ‘Calculate Metrics’ in the side panel.</span></li>
<li><span>Hovering to get metric descriptions.</span></li>
<li><span>Use scrollbar if table size exceeds window size.</span></li>
</ul><h4 id="231-The-plugin-side-panel" data-id="231-The-plugin-side-panel"><a class="anchor hidden-xs" href="#231-The-plugin-side-panel" title="231-The-plugin-side-panel"><span class="octicon octicon-link"></span></a><span>2.3.1 The plugin side panel</span></h4><p><span>The plugin side panel is represented by the class </span><code>ProjectToolWindow</code><span>. An instance of it is created by the class </span><code>MyToolWindowFactory</code><span> that inherits the interface </span><code>ToolWindowFactory</code><span>.</span></p><p><code>ProjectToolWindow</code><span> is composed of multiple nested graphical elements. In particular, the </span><code>MetricWindow</code><span> contains multiple MetricPanels set in a vertical layout. </span><code>BaseMetricPanel</code><span>. </span><code>ProjectToolWindow</code><span> also contains the warning popup.</span></p><p><img src="https://hackmd.io/_uploads/S140chYcF.png" alt="diagram 2.3.a" loading="lazy"></p><h5 id="Calculate-save-metric-values" data-id="Calculate-save-metric-values"><a class="anchor hidden-xs" href="#Calculate-save-metric-values" title="Calculate-save-metric-values"><span class="octicon octicon-link"></span></a><span>Calculate, save metric values</span></h5><p><span>To calculate the metric, the user has to press the button ‘Calculate Metrics’ at the top of the MetricWindow. When pressed, the metrics are calculated as describe in the section 2.2.5 (Warning System).</span></p><p><span>The calculated values are then displayed in the respective </span><code>MetricPanel</code><span> and </span><code>BaseMetricPanel</code><span>.</span></p><h5 id="Hovering-description" data-id="Hovering-description"><a class="anchor hidden-xs" href="#Hovering-description" title="Hovering-description"><span class="octicon octicon-link"></span></a><span>Hovering description</span></h5><p><img src="https://hackmd.io/_uploads/Hyife6q5Y.png" alt="" loading="lazy"></p><p><span>When the user puts its mouse over the name of a metric, a short description will be shown. The descriptions are stored inside the class </span><code>MetricDescription</code><span> and can be obtained by calling </span><code> MetricDescription.get(Metric.Type type)</code><span>. The hovering is implemented by calling the following function in the constructor of </span><code>MetricPanel</code><span>.</span></p><pre><code class="java hljs">        panel<span class="token punctuation">.</span><span class="token function">setToolTipText</span><span class="token punctuation">(</span><span class="token class-name">MetricDescription</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h4 id="232-Metric-Panel" data-id="232-Metric-Panel"><a class="anchor hidden-xs" href="#232-Metric-Panel" title="232-Metric-Panel"><span class="octicon octicon-link"></span></a><span>2.3.2 Metric Panel</span></h4><pre class="mermaid" data-processed="true"><svg id="mermaid-1639826920015" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="512.625" style="max-width: 300.40625px;" viewBox="0 0 300.40625 512.625"><style>#mermaid-1639826920015 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1639826920015 .error-icon{fill:#552222;}#mermaid-1639826920015 .error-text{fill:#552222;stroke:#552222;}#mermaid-1639826920015 .edge-thickness-normal{stroke-width:2px;}#mermaid-1639826920015 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1639826920015 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1639826920015 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1639826920015 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1639826920015 .marker{fill:#333333;stroke:#333333;}#mermaid-1639826920015 .marker.cross{stroke:#333333;}#mermaid-1639826920015 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1639826920015 g.classGroup text{fill:#9370DB;fill:#131300;stroke:none;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:10px;}#mermaid-1639826920015 g.classGroup text .title{font-weight:bolder;}#mermaid-1639826920015 .nodeLabel,#mermaid-1639826920015 .edgeLabel{color:#131300;}#mermaid-1639826920015 .edgeLabel .label rect{fill:#ECECFF;}#mermaid-1639826920015 .label text{fill:#131300;}#mermaid-1639826920015 .edgeLabel .label span{background:#ECECFF;}#mermaid-1639826920015 .classTitle{font-weight:bolder;}#mermaid-1639826920015 .node rect,#mermaid-1639826920015 .node circle,#mermaid-1639826920015 .node ellipse,#mermaid-1639826920015 .node polygon,#mermaid-1639826920015 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1639826920015 .divider{stroke:#9370DB;stroke:1;}#mermaid-1639826920015 g.clickable{cursor:pointer;}#mermaid-1639826920015 g.classGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaid-1639826920015 g.classGroup line{stroke:#9370DB;stroke-width:1;}#mermaid-1639826920015 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaid-1639826920015 .classLabel .label{fill:#9370DB;font-size:10px;}#mermaid-1639826920015 .relation{stroke:#333333;stroke-width:1;fill:none;}#mermaid-1639826920015 .dashed-line{stroke-dasharray:3;}#mermaid-1639826920015 #compositionStart,#mermaid-1639826920015 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826920015 #compositionEnd,#mermaid-1639826920015 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826920015 #dependencyStart,#mermaid-1639826920015 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826920015 #dependencyStart,#mermaid-1639826920015 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826920015 #extensionStart,#mermaid-1639826920015 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826920015 #extensionEnd,#mermaid-1639826920015 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826920015 #aggregationStart,#mermaid-1639826920015 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826920015 #aggregationEnd,#mermaid-1639826920015 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826920015 .edgeTerminals{font-size:11px;}#mermaid-1639826920015 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g transform="translate(0, 0)"><defs><marker id="classDiagram-aggregationStart" class="marker aggregation classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-aggregationEnd" class="marker aggregation classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-extensionStart" class="marker extension classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 1,7 L18,13 V 1 Z"></path></marker></defs><defs><marker id="classDiagram-extensionEnd" class="marker extension classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 1,1 V 13 L18,7 Z"></path></marker></defs><defs><marker id="classDiagram-compositionStart" class="marker composition classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-compositionEnd" class="marker composition classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-dependencyStart" class="marker dependency classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 5,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-dependencyEnd" class="marker dependency classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M150.203125,233.3125L150.203125,239.41145833333334C150.203125,245.51041666666666,150.203125,257.7083333333333,150.203125,269.90625C150.203125,282.1041666666667,150.203125,294.3020833333333,150.203125,300.4010416666667L150.203125,306.5" id="id1" class="edge-pattern-solid relation" style="fill:none" marker-start="url(#classDiagram-extensionStart)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(150.203125, 269.90625)"><g class="label" transform="translate(-29.203125, -11.59375)"><foreignObject width="58.40625" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">extends</span></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="classid-MetricPanel-45" transform="translate(150.203125, 120.65625)"><rect class="outer title-state" x="-142.203125" y="-112.65625" width="284.40625" height="225.3125"></rect><line class="divider" x1="-142.203125" x2="142.203125" y1="-77.46875" y2="-77.46875"></line><line class="divider" x1="-142.203125" x2="142.203125" y1="20.09375" y2="20.09375"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="91.640625" height="23.1875" transform="translate( -45.8203125, -105.15625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">MetricPanel</span></div></foreignObject><foreignObject width="101.15625" height="23.1875" transform="translate( -134.703125, -65.96875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-JPanel panel</span></div></foreignObject><foreignObject width="158.96875" height="23.1875" transform="translate( -134.703125, -38.78125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-List&lt;Metric&gt; metrics</span></div></foreignObject><foreignObject width="192.84375" height="23.1875" transform="translate( -134.703125, -11.59375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-List&lt;Label&gt; metricValues</span></div></foreignObject><foreignObject width="269.40625" height="23.1875" transform="translate( -134.703125, 27.59375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+updateMetric(boolean warn) : void</span></div></foreignObject><foreignObject width="186.28125" height="23.1875" transform="translate( -134.703125, 54.78125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+setWarningTitle() : void</span></div></foreignObject><foreignObject width="164.5625" height="23.1875" transform="translate( -134.703125, 81.96875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+setBasicTitle() : void</span></div></foreignObject></g></g><g class="node default" id="classid-BaseMetricPanel-46" transform="translate(150.203125, 405.5625)"><rect class="outer title-state" x="-142.203125" y="-99.0625" width="284.40625" height="198.125"></rect><line class="divider" x1="-142.203125" x2="142.203125" y1="-63.875" y2="-63.875"></line><line class="divider" x1="-142.203125" x2="142.203125" y1="33.6875" y2="33.6875"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="127.171875" height="23.1875" transform="translate( -63.5859375, -91.5625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">BaseMetricPanel</span></div></foreignObject><foreignObject width="109.96875" height="23.1875" transform="translate( -134.703125, -52.375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+JBTable table</span></div></foreignObject><foreignObject width="215.125" height="23.1875" transform="translate( -134.703125, -25.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-List&lt;PsiMethod&gt; methodList</span></div></foreignObject><foreignObject width="266.203125" height="23.1875" transform="translate( -134.703125, 2)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-List&lt;Set&lt;Psimethod&gt;&gt; warnMethod</span></div></foreignObject><foreignObject width="269.40625" height="23.1875" transform="translate( -134.703125, 41.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+updateMetric(boolean warn) : void</span></div></foreignObject><foreignObject width="195.34375" height="23.1875" transform="translate( -134.703125, 68.375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+setTableProperty() : void</span></div></foreignObject></g></g></g></g></g></svg></pre><h5 id="Structure4" data-id="Structure"><a class="anchor hidden-xs" href="#Structure4" title="Structure4"><span class="octicon octicon-link"></span></a><span>Structure</span></h5><p><code>MetricPanel</code><span> is simple single panel for displaying single Metric value. It use Label for show meticValue.</span><br>
<code>BaseMetricPanel</code><span> is more complicated panel for dispaying </span><strong><span>BaseMetric</span></strong><span> value. It has multiple value, so it sue JBTable instead of single Label.</span><br>
<code>updateMetric</code><span> is invoked when Metric is re-calculated.</span><br>
<span>Each cell of Table is rendered by rendingFunction, and navigation use mouseClickListener of table. </span><code>setTableProperty</code><span> set this function to Table.</span></p><h5 id="Algorithm4" data-id="Algorithm"><a class="anchor hidden-xs" href="#Algorithm4" title="Algorithm4"><span class="octicon octicon-link"></span></a><span>Algorithm</span></h5><h6 id="updateMetric" data-id="updateMetric"><a class="anchor hidden-xs" href="#updateMetric" title="updateMetric"><span class="octicon octicon-link"></span></a><span>updateMetric</span></h6><pre><code class="java hljs">       <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Pair</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">PsiMethod</span><span class="token punctuation">&gt;</span></span> key <span class="token operator">:</span> tableRowMap<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> aClass <span class="token operator">=</span> key<span class="token punctuation">.</span>first<span class="token punctuation">;</span>
            <span class="token class-name">PsiMethod</span> aMethod <span class="token operator">=</span> key<span class="token punctuation">.</span>second<span class="token punctuation">;</span>

            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> listValues <span class="token operator">=</span> tableRowMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> rowData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">+</span> listValues<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            rowData<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> aClass<span class="token punctuation">;</span>
            rowData<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> aMethod<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> listValues<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                rowData<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> metricValueFormatter<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>listValues<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            tableModel<span class="token punctuation">.</span><span class="token function">addRow</span><span class="token punctuation">(</span>rowData<span class="token punctuation">)</span><span class="token punctuation">;</span>
            methodList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>aMethod<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre><p><span>After calculating, MetricPanel just get the Metric value as Map sturcture (PsiClass, &lt;PsiMethod, Double&gt;). using for loop we make row of table. Panel can display every Metric value for each method/class.</span></p><h6 id="Warning" data-id="Warning"><a class="anchor hidden-xs" href="#Warning" title="Warning"><span class="octicon octicon-link"></span></a><span>Warning</span></h6><pre><code class="java hljs"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">Component</span> <span class="token function">getTableCellRendererComponent</span><span class="token punctuation">(</span><span class="token class-name">JTable</span> table<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isSelected<span class="token punctuation">,</span> <span class="token keyword">boolean</span> hasFocus<span class="token punctuation">,</span> <span class="token keyword">int</span> row<span class="token punctuation">,</span> <span class="token keyword">int</span> column<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PsiMethod</span><span class="token punctuation">&gt;</span></span> compareList <span class="token operator">=</span> warnMethod<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>column <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        setWarn <span class="token operator">=</span> compareList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>setWarn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            c<span class="token punctuation">.</span><span class="token function">setForeground</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>YELLOW<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            c<span class="token punctuation">.</span><span class="token function">setForeground</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>WHITE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
</code></pre><p><span>If warning occurs, Panel set the title of Metric as warning title by </span><code>setWarnTitle</code><span>.</span><br>
<span>Also after getting degradingMetrics from BaseMetric, and store corresponding PsiMethod as List. In the CellRenderer, each cell check PsiMethod they contains is degrading Method. Then change the text of cell color by that result.</span></p><h6 id="Navigation" data-id="Navigation"><a class="anchor hidden-xs" href="#Navigation" title="Navigation"><span class="octicon octicon-link"></span></a><span>Navigation</span></h6><pre><code class="java hljs"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">mouseClicked</span><span class="token punctuation">(</span><span class="token class-name">MouseEvent</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> row <span class="token operator">=</span> table<span class="token punctuation">.</span><span class="token function">rowAtPoint</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>methodList<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">PsiJvmMember</span> codePart <span class="token operator">=</span> methodList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">;</span>
        codePart<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p><span>In </span><code>updateMetric</code><span>, we store (row, PsiMethod) for find corresponding PsiMethod by row of cell.</span><br>
<span>We added mouseListener to table cell. If cell is clicked, first get row of cell be clicked. And use PsiJvmMember to navigate that code part.</span></p><h4 id="232-MetricWindow" data-id="232-MetricWindow"><a class="anchor hidden-xs" href="#232-MetricWindow" title="232-MetricWindow"><span class="octicon octicon-link"></span></a><span>2.3.2 MetricWindow</span></h4><p><span>The </span><code>MetricWindow</code><span> is a collection of </span><code>MetricPanel</code><span> displayed in a vertical layout. The </span><code>MetricPanel</code><span>. All the different MetricPanels are instanciated inside the </span><code>MetricWindow</code><span> constructor.</span></p><p><span>The </span><code>MetricWindow</code><span> implements the Singleton Pattern. Thus only one instance of this class exists in the whole project. This instance can be acquired by calling the </span><code>getInstance(...)</code><span> function.</span></p><pre class="mermaid" data-processed="true"><svg id="mermaid-1639826675441" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="679.1875" style="max-width: 713.859375px;" viewBox="0 0 713.859375 679.1875"><style>#mermaid-1639826675441 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1639826675441 .error-icon{fill:#552222;}#mermaid-1639826675441 .error-text{fill:#552222;stroke:#552222;}#mermaid-1639826675441 .edge-thickness-normal{stroke-width:2px;}#mermaid-1639826675441 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1639826675441 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1639826675441 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1639826675441 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1639826675441 .marker{fill:#333333;stroke:#333333;}#mermaid-1639826675441 .marker.cross{stroke:#333333;}#mermaid-1639826675441 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1639826675441 g.classGroup text{fill:#9370DB;fill:#131300;stroke:none;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:10px;}#mermaid-1639826675441 g.classGroup text .title{font-weight:bolder;}#mermaid-1639826675441 .nodeLabel,#mermaid-1639826675441 .edgeLabel{color:#131300;}#mermaid-1639826675441 .edgeLabel .label rect{fill:#ECECFF;}#mermaid-1639826675441 .label text{fill:#131300;}#mermaid-1639826675441 .edgeLabel .label span{background:#ECECFF;}#mermaid-1639826675441 .classTitle{font-weight:bolder;}#mermaid-1639826675441 .node rect,#mermaid-1639826675441 .node circle,#mermaid-1639826675441 .node ellipse,#mermaid-1639826675441 .node polygon,#mermaid-1639826675441 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1639826675441 .divider{stroke:#9370DB;stroke:1;}#mermaid-1639826675441 g.clickable{cursor:pointer;}#mermaid-1639826675441 g.classGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaid-1639826675441 g.classGroup line{stroke:#9370DB;stroke-width:1;}#mermaid-1639826675441 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaid-1639826675441 .classLabel .label{fill:#9370DB;font-size:10px;}#mermaid-1639826675441 .relation{stroke:#333333;stroke-width:1;fill:none;}#mermaid-1639826675441 .dashed-line{stroke-dasharray:3;}#mermaid-1639826675441 #compositionStart,#mermaid-1639826675441 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826675441 #compositionEnd,#mermaid-1639826675441 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826675441 #dependencyStart,#mermaid-1639826675441 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826675441 #dependencyStart,#mermaid-1639826675441 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826675441 #extensionStart,#mermaid-1639826675441 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826675441 #extensionEnd,#mermaid-1639826675441 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826675441 #aggregationStart,#mermaid-1639826675441 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826675441 #aggregationEnd,#mermaid-1639826675441 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826675441 .edgeTerminals{font-size:11px;}#mermaid-1639826675441 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g transform="translate(0, 0)"><defs><marker id="classDiagram-aggregationStart" class="marker aggregation classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-aggregationEnd" class="marker aggregation classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-extensionStart" class="marker extension classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 1,7 L18,13 V 1 Z"></path></marker></defs><defs><marker id="classDiagram-extensionEnd" class="marker extension classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 1,1 V 13 L18,7 Z"></path></marker></defs><defs><marker id="classDiagram-compositionStart" class="marker composition classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-compositionEnd" class="marker composition classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-dependencyStart" class="marker dependency classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 5,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-dependencyEnd" class="marker dependency classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M235.56739835243928,345.5L227.92725904369942,351.5989583333333C220.28711973495953,357.6979166666667,205.00684111747978,369.8958333333333,197.3667018087399,382.09375C189.7265625,394.2916666666667,189.7265625,406.4895833333333,189.7265625,412.5885416666667L189.7265625,418.6875" id="id1" class="edge-pattern-solid relation" style="fill:none" marker-start="url(#classDiagram-compositionStart)"></path><path d="M376.69140625,70.1875L376.69140625,74.35416666666667C376.69140625,78.52083333333333,376.69140625,86.85416666666667,376.69140625,95.1875C376.69140625,103.52083333333333,376.69140625,111.85416666666667,376.69140625,116.02083333333333L376.69140625,120.1875" id="id2" class="edge-pattern-solid relation" style="fill:none" marker-start="url(#classDiagram-extensionStart)"></path><path d="M517.8154141475607,345.5L525.4555534563005,351.5989583333333C533.0956927650404,357.6979166666667,548.3759713825202,369.8958333333333,556.0161106912601,386.625C563.65625,403.3541666666667,563.65625,424.6145833333333,563.65625,435.2447916666667L563.65625,445.875" id="id3" class="edge-pattern-solid relation" style="fill:none" marker-start="url(#classDiagram-extensionStart)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(189.7265625, 382.09375)"><g class="label" transform="translate(-31.296875, -11.59375)"><foreignObject width="62.59375" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">contains</span></span></div></foreignObject></g></g><g class="edgeTerminals" transform="translate(212.53260158835795, 344.6949297934547)"><g class="inner" transform="translate(0, 0)"><foreignObject style="width: 36px; height: 12px;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">many</span></div></foreignObject></g></g><g class="edgeTerminals" transform="translate(199.7265625, 396.1875)"><g class="inner" transform="translate(0, 0)"></g><foreignObject style="width: 9px; height: 12px;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">1</span></div></foreignObject></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="classid-MetricWindow-33" transform="translate(189.7265625, 544.9375)"><rect class="outer title-state" x="-181.7265625" y="-126.25" width="363.453125" height="252.5"></rect><line class="divider" x1="-181.7265625" x2="181.7265625" y1="-63.875" y2="-63.875"></line><line class="divider" x1="-181.7265625" x2="181.7265625" y1="6.5" y2="6.5"></line><g class="label"><foreignObject width="85.5625" height="23.1875" transform="translate( -42.78125, -118.75)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">«singleton»</span></div></foreignObject><foreignObject class="classTitle" width="110.703125" height="23.1875" transform="translate( -55.3515625, -91.5625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">MetricWindow</span></div></foreignObject><foreignObject width="226.90625" height="23.1875" transform="translate( -174.2265625, -52.375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-static MetricWindow instance</span></div></foreignObject><foreignObject width="208.09375" height="23.1875" transform="translate( -174.2265625, -25.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-MetricPanel[] metricPanels</span></div></foreignObject><foreignObject width="348.453125" height="23.1875" transform="translate( -174.2265625, 14)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+getInstance(w, h, metricList) : MetricWindow</span></div></foreignObject><foreignObject width="230.6875" height="23.1875" transform="translate( -174.2265625, 41.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+getMetricContainer() : JPanel</span></div></foreignObject><foreignObject width="236.4375" height="23.1875" transform="translate( -174.2265625, 68.375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+setMetrics(warnMetrics) : void</span></div></foreignObject><foreignObject width="281.640625" height="23.1875" transform="translate( -174.2265625, 95.5625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+showWarnMetric(warnMetrics) : void</span></div></foreignObject></g></g><g class="node default" id="classid-MetricPanel-34" transform="translate(376.69140625, 232.84375)"><rect class="outer title-state" x="-142.203125" y="-112.65625" width="284.40625" height="225.3125"></rect><line class="divider" x1="-142.203125" x2="142.203125" y1="-77.46875" y2="-77.46875"></line><line class="divider" x1="-142.203125" x2="142.203125" y1="20.09375" y2="20.09375"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="91.640625" height="23.1875" transform="translate( -45.8203125, -105.15625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">MetricPanel</span></div></foreignObject><foreignObject width="101.15625" height="23.1875" transform="translate( -134.703125, -65.96875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-JPanel panel</span></div></foreignObject><foreignObject width="158.96875" height="23.1875" transform="translate( -134.703125, -38.78125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-List&lt;Metric&gt; metrics</span></div></foreignObject><foreignObject width="192.84375" height="23.1875" transform="translate( -134.703125, -11.59375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-List&lt;Label&gt; metricValues</span></div></foreignObject><foreignObject width="269.40625" height="23.1875" transform="translate( -134.703125, 27.59375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+updateMetric(boolean warn) : void</span></div></foreignObject><foreignObject width="186.28125" height="23.1875" transform="translate( -134.703125, 54.78125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+setWarningTitle() : void</span></div></foreignObject><foreignObject width="164.5625" height="23.1875" transform="translate( -134.703125, 81.96875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+setBasicTitle() : void</span></div></foreignObject></g></g><g class="node default" id="classid-BaseMetricPanel-35" transform="translate(563.65625, 544.9375)"><rect class="outer title-state" x="-142.203125" y="-99.0625" width="284.40625" height="198.125"></rect><line class="divider" x1="-142.203125" x2="142.203125" y1="-63.875" y2="-63.875"></line><line class="divider" x1="-142.203125" x2="142.203125" y1="33.6875" y2="33.6875"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="127.171875" height="23.1875" transform="translate( -63.5859375, -91.5625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">BaseMetricPanel</span></div></foreignObject><foreignObject width="109.96875" height="23.1875" transform="translate( -134.703125, -52.375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+JBTable table</span></div></foreignObject><foreignObject width="215.125" height="23.1875" transform="translate( -134.703125, -25.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-List&lt;PsiMethod&gt; methodList</span></div></foreignObject><foreignObject width="266.203125" height="23.1875" transform="translate( -134.703125, 2)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-List&lt;Set&lt;Psimethod&gt;&gt; warnMethod</span></div></foreignObject><foreignObject width="269.40625" height="23.1875" transform="translate( -134.703125, 41.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+updateMetric(boolean warn) : void</span></div></foreignObject><foreignObject width="195.34375" height="23.1875" transform="translate( -134.703125, 68.375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+setTableProperty() : void</span></div></foreignObject></g></g><g class="node default" id="classid-JPanel-36" transform="translate(376.69140625, 39.09375)"><rect class="outer title-state" x="-33.078125" y="-31.09375" width="66.15625" height="62.1875"></rect><line class="divider" x1="-33.078125" x2="33.078125" y1="4.09375" y2="4.09375"></line><line class="divider" x1="-33.078125" x2="33.078125" y1="20.09375" y2="20.09375"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="51.15625" height="23.1875" transform="translate( -25.578125, -23.59375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">JPanel</span></div></foreignObject></g></g></g></g></g></svg></pre><p><span>The </span><code>MetricWindow</code><span> constructor creates the different MetricPanels:</span></p><pre><code class="java hljs"><span class="token keyword">public</span> <span class="token class-name">MetricWindow</span><span class="token punctuation">(</span><span class="token keyword">int</span> width<span class="token punctuation">,</span> <span class="token keyword">int</span> height<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token operator">&lt;</span><span class="token class-name">Metric<span class="token punctuation">.</span>Type</span><span class="token punctuation">,</span> <span class="token class-name">Metric</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> metricList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// We use a container to allow scrolling</span>
        metricContainer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JPanel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        metricContainer<span class="token punctuation">.</span><span class="token function">setLayout</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BoxLayout</span><span class="token punctuation">(</span>metricContainer<span class="token punctuation">,</span> <span class="token class-name">BoxLayout</span><span class="token punctuation">.</span>PAGE_AXIS<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        metricPanels <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MetricPanel</span><span class="token punctuation">[</span><span class="token class-name">Metric<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token class-name">MetricPanel</span> codeLinePanel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MetricPanel</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token class-name">Metric<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span>LINES_OF_CODE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        metricPanels<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> codeLinePanel<span class="token punctuation">;</span>
        metricContainer<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>codeLinePanel<span class="token punctuation">.</span><span class="token function">getPanel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">BaseMetricPanel</span> halsteadPanel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BaseMetricPanel</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token class-name">Metric<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span>HALSTEAD<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">"Vocabulary"</span><span class="token punctuation">,</span> <span class="token string">"Volume"</span><span class="token punctuation">,</span> <span class="token string">"Difficulty"</span><span class="token punctuation">,</span> <span class="token string">"Effort"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        metricPanels<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> halsteadPanel<span class="token punctuation">;</span>
        metricContainer<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>halsteadPanel<span class="token punctuation">.</span><span class="token function">getPanel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">BaseMetricPanel</span> cycloPanel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BaseMetricPanel</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token class-name">Metric<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span>CYCLOMATIC<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">"MetricValue"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        metricPanels<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> cycloPanel<span class="token punctuation">;</span>
        metricContainer<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cycloPanel<span class="token punctuation">.</span><span class="token function">getPanel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">MetricPanel</span> miPanel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MetricPanel</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token class-name">Metric<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span>MAINTAINABILITY<span class="token punctuation">)</span><span class="token punctuation">;</span>
        metricPanels<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> miPanel<span class="token punctuation">;</span>
        metricContainer<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>miPanel<span class="token punctuation">.</span><span class="token function">getPanel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p><code>MetricWindow</code><span> contains the functions </span><code>setMetrics(ArrayList&lt;Metric.Type&gt; warnMetric)</code><span> and </span><code>showWarnMetric(Metric.Type[] warnMetrics)</code><span>. The first one allows to update the metrics values, while the second display a warning titles. Both call </span><code>MetricPanel</code><span> functions to do the job.</span></p><h4 id="233-ProjectToolWindow" data-id="233-ProjectToolWindow"><a class="anchor hidden-xs" href="#233-ProjectToolWindow" title="233-ProjectToolWindow"><span class="octicon octicon-link"></span></a><span>2.3.3 ProjectToolWindow</span></h4><pre class="mermaid" data-processed="true"><svg id="mermaid-1639826675497" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="539.8125" style="max-width: 768.875px;" viewBox="0 0 768.875 539.8125"><style>#mermaid-1639826675497 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1639826675497 .error-icon{fill:#552222;}#mermaid-1639826675497 .error-text{fill:#552222;stroke:#552222;}#mermaid-1639826675497 .edge-thickness-normal{stroke-width:2px;}#mermaid-1639826675497 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1639826675497 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1639826675497 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1639826675497 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1639826675497 .marker{fill:#333333;stroke:#333333;}#mermaid-1639826675497 .marker.cross{stroke:#333333;}#mermaid-1639826675497 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1639826675497 g.classGroup text{fill:#9370DB;fill:#131300;stroke:none;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:10px;}#mermaid-1639826675497 g.classGroup text .title{font-weight:bolder;}#mermaid-1639826675497 .nodeLabel,#mermaid-1639826675497 .edgeLabel{color:#131300;}#mermaid-1639826675497 .edgeLabel .label rect{fill:#ECECFF;}#mermaid-1639826675497 .label text{fill:#131300;}#mermaid-1639826675497 .edgeLabel .label span{background:#ECECFF;}#mermaid-1639826675497 .classTitle{font-weight:bolder;}#mermaid-1639826675497 .node rect,#mermaid-1639826675497 .node circle,#mermaid-1639826675497 .node ellipse,#mermaid-1639826675497 .node polygon,#mermaid-1639826675497 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1639826675497 .divider{stroke:#9370DB;stroke:1;}#mermaid-1639826675497 g.clickable{cursor:pointer;}#mermaid-1639826675497 g.classGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaid-1639826675497 g.classGroup line{stroke:#9370DB;stroke-width:1;}#mermaid-1639826675497 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaid-1639826675497 .classLabel .label{fill:#9370DB;font-size:10px;}#mermaid-1639826675497 .relation{stroke:#333333;stroke-width:1;fill:none;}#mermaid-1639826675497 .dashed-line{stroke-dasharray:3;}#mermaid-1639826675497 #compositionStart,#mermaid-1639826675497 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826675497 #compositionEnd,#mermaid-1639826675497 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826675497 #dependencyStart,#mermaid-1639826675497 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826675497 #dependencyStart,#mermaid-1639826675497 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826675497 #extensionStart,#mermaid-1639826675497 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826675497 #extensionEnd,#mermaid-1639826675497 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826675497 #aggregationStart,#mermaid-1639826675497 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826675497 #aggregationEnd,#mermaid-1639826675497 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1639826675497 .edgeTerminals{font-size:11px;}#mermaid-1639826675497 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g transform="translate(0, 0)"><defs><marker id="classDiagram-aggregationStart" class="marker aggregation classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-aggregationEnd" class="marker aggregation classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-extensionStart" class="marker extension classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 1,7 L18,13 V 1 Z"></path></marker></defs><defs><marker id="classDiagram-extensionEnd" class="marker extension classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 1,1 V 13 L18,7 Z"></path></marker></defs><defs><marker id="classDiagram-compositionStart" class="marker composition classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-compositionEnd" class="marker composition classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-dependencyStart" class="marker dependency classDiagram" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 5,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="classDiagram-dependencyEnd" class="marker dependency classDiagram" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M91.4140625,233.3125L91.4140625,262.0677083333333C91.4140625,290.8229166666667,91.4140625,348.3333333333333,106.47504265186467,383.1875C121.53602280372934,418.0416666666667,151.65798310745868,430.2395833333333,166.71896325932335,436.3385416666667L181.77994341118801,442.4375" id="id1" class="edge-pattern-solid relation" style="fill:none" marker-start="url(#classDiagram-extensionStart)"></path><path d="M492.8515625,369.25L492.8515625,375.3489583333333C492.8515625,381.4479166666667,492.8515625,393.6458333333333,477.79058234813533,405.84375C462.72960219627066,418.0416666666667,432.6076418925413,430.2395833333333,417.54666174067665,436.3385416666667L402.485681588812,442.4375" id="id2" class="edge-pattern-solid relation" style="fill:none" marker-start="url(#classDiagram-aggregationStart)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(91.4140625, 405.84375)"><g class="label" transform="translate(-43.640625, -11.59375)"><foreignObject width="87.28125" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">implements</span></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(492.8515625, 405.84375)"><g class="label" transform="translate(-27.640625, -11.59375)"><foreignObject width="55.28125" height="23.1875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"><span class="edgeLabel">creates</span></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="classid-ToolWindowFactory-40" transform="translate(91.4140625, 188.625)"><rect class="outer title-state" x="-83.4140625" y="-44.6875" width="166.828125" height="89.375"></rect><line class="divider" x1="-83.4140625" x2="83.4140625" y1="17.6875" y2="17.6875"></line><line class="divider" x1="-83.4140625" x2="83.4140625" y1="33.6875" y2="33.6875"></line><g class="label"><foreignObject width="86.203125" height="23.1875" transform="translate( -43.1015625, -37.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">«interface»</span></div></foreignObject><foreignObject class="classTitle" width="151.828125" height="23.1875" transform="translate( -75.9140625, -10)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">ToolWindowFactory</span></div></foreignObject></g></g><g class="node default" id="classid-MyToolWindowFactory-41" transform="translate(292.1328125, 487.125)"><rect class="outer title-state" x="-217.65625" y="-44.6875" width="435.3125" height="89.375"></rect><line class="divider" x1="-217.65625" x2="217.65625" y1="-9.5" y2="-9.5"></line><line class="divider" x1="-217.65625" x2="217.65625" y1="6.5" y2="6.5"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="172.984375" height="23.1875" transform="translate( -86.4921875, -37.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">MyToolWindowFactory</span></div></foreignObject><foreignObject width="420.3125" height="23.1875" transform="translate( -210.15625, 14)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+createToolWindowContent(Project, ToolWindow) : void</span></div></foreignObject></g></g><g class="node default" id="classid-ProjectToolWindow-42" transform="translate(492.8515625, 188.625)"><rect class="outer title-state" x="-268.0234375" y="-180.625" width="536.046875" height="361.25"></rect><line class="divider" x1="-268.0234375" x2="268.0234375" y1="-145.4375" y2="-145.4375"></line><line class="divider" x1="-268.0234375" x2="268.0234375" y1="-47.875" y2="-47.875"></line><g class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel"></span></div></foreignObject><foreignObject class="classTitle" width="150.625" height="23.1875" transform="translate( -75.3125, -173.125)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">ProjectToolWindow</span></div></foreignObject><foreignObject width="263.234375" height="23.1875" transform="translate( -260.5234375, -133.9375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-JPanel projectToolWindowContent</span></div></foreignObject><foreignObject width="114.859375" height="23.1875" transform="translate( -260.5234375, -106.75)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-Jpanel toolbar</span></div></foreignObject><foreignObject width="213.28125" height="23.1875" transform="translate( -260.5234375, -79.5625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-JButton buttonCalcAndSave</span></div></foreignObject><foreignObject width="353.328125" height="23.1875" transform="translate( -260.5234375, -40.375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+ProjectToolWindow(ToolWindow,width,height)</span></div></foreignObject><foreignObject width="169.90625" height="23.1875" transform="translate( -260.5234375, -13.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">+getContent() : JPanel</span></div></foreignObject><foreignObject width="214.90625" height="23.1875" transform="translate( -260.5234375, 14)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-getActiveProject() : Project</span></div></foreignObject><foreignObject width="167.78125" height="23.1875" transform="translate( -260.5234375, 41.1875)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-getWarning() : JPanel</span></div></foreignObject><foreignObject width="170.171875" height="23.1875" transform="translate( -260.5234375, 68.375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-createToolbar() : void</span></div></foreignObject><foreignObject width="398.03125" height="23.1875" transform="translate( -260.5234375, 95.5625)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-backgroundOperation(ThrowableRunnable&lt;?&gt;) : void</span></div></foreignObject><foreignObject width="521.046875" height="23.1875" transform="translate( -260.5234375, 122.75)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-doMetricsCalculation(ComponentPopupBuilder, MetricWindow) : void</span></div></foreignObject><foreignObject width="172.859375" height="23.1875" transform="translate( -260.5234375, 149.9375)"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">-doMetricsSave() : void</span></div></foreignObject></g></g></g></g></g></svg></pre><p><code>MyToolWindowFactory</code><span> creates the instance of </span><code>ProjectToolWindow</code><span>. The </span><code>ProjectToolWindow</code><span> is the container class of our plugin window. It contains the components (toolbar, metric window) of the UI, and is triggering the calculation of the software metrics.</span></p><h2 id="3-Appendix" data-id="3-Appendix"><a class="anchor hidden-xs" href="#3-Appendix" title="3-Appendix"><span class="octicon octicon-link"></span></a><span>3. Appendix</span></h2><h3 id="31-Environment" data-id="31-Environment"><a class="anchor hidden-xs" href="#31-Environment" title="31-Environment"><span class="octicon octicon-link"></span></a><span>3.1. Environment</span></h3><p><span>In order to run our plugin the following system requirements are needed:</span></p><ul>
<li><span>OS: Ubuntu 20.04, 21.04; MacOS; Windows 10</span></li>
<li><span>Java version : jdk11 (corretto-11 or OpenJDK11)</span></li>
<li><span>Gradle version: as specified in gradle-wrapper, 7.*</span></li>
</ul><blockquote>
<p><span>💡 Note on Gradle Wrapper: it invokes a declared version of Gradle (version declared as property in </span><code>team2_project/gradle/wrapper/gradle-wrapper.properties</code><span>) and downloads it if necessary.</span></p>
</blockquote><h3 id="32-CI" data-id="32-CI"><a class="anchor hidden-xs" href="#32-CI" title="32-CI"><span class="octicon octicon-link"></span></a><span>3.2. CI</span></h3><h4 id="321-Structure" data-id="321-Structure"><a class="anchor hidden-xs" href="#321-Structure" title="321-Structure"><span class="octicon octicon-link"></span></a><span>3.2.1 Structure</span></h4><pre class="mermaid" data-processed="true"><svg id="mermaid-1639826675747" width="100%" xmlns="http://www.w3.org/2000/svg" height="643" style="max-width: 955.5px;" viewBox="-50 -10 955.5 643"><style>#mermaid-1639826675747 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1639826675747 .error-icon{fill:#552222;}#mermaid-1639826675747 .error-text{fill:#552222;stroke:#552222;}#mermaid-1639826675747 .edge-thickness-normal{stroke-width:2px;}#mermaid-1639826675747 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1639826675747 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1639826675747 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1639826675747 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1639826675747 .marker{fill:#333333;stroke:#333333;}#mermaid-1639826675747 .marker.cross{stroke:#333333;}#mermaid-1639826675747 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1639826675747 .actor{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-1639826675747 text.actor&gt;tspan{fill:black;stroke:none;}#mermaid-1639826675747 .actor-line{stroke:grey;}#mermaid-1639826675747 .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-1639826675747 .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-1639826675747 #arrowhead path{fill:#333;stroke:#333;}#mermaid-1639826675747 .sequenceNumber{fill:white;}#mermaid-1639826675747 #sequencenumber{fill:#333;}#mermaid-1639826675747 #crosshead path{fill:#333;stroke:#333;}#mermaid-1639826675747 .messageText{fill:#333;stroke:#333;}#mermaid-1639826675747 .labelBox{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-1639826675747 .labelText,#mermaid-1639826675747 .labelText&gt;tspan{fill:black;stroke:none;}#mermaid-1639826675747 .loopText,#mermaid-1639826675747 .loopText&gt;tspan{fill:black;stroke:none;}#mermaid-1639826675747 .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);}#mermaid-1639826675747 .note{stroke:#aaaa33;fill:#fff5ad;}#mermaid-1639826675747 .noteText,#mermaid-1639826675747 .noteText&gt;tspan{fill:black;stroke:none;}#mermaid-1639826675747 .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-1639826675747 .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-1639826675747 .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-1639826675747 .actor-man line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-1639826675747 .actor-man circle,#mermaid-1639826675747 line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;stroke-width:2px;}#mermaid-1639826675747 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g></g><g><line id="actor0" x1="105.5" y1="5" x2="105.5" y2="577" class="200" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="211" height="65" rx="3" ry="3" class="actor"></rect><text x="105.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="105.5" dy="0">GitLab (csed332.postech.ac.kr)</tspan></text></g><g><line id="actor1" x1="443.5" y1="5" x2="443.5" y2="577" class="200" stroke-width="0.5px" stroke="#999"></line><rect x="368.5" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="443.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="443.5" dy="0">GitLab Runner</tspan></text></g><g><line id="actor2" x1="780.5" y1="5" x2="780.5" y2="577" class="200" stroke-width="0.5px" stroke="#999"></line><rect x="705.5" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="780.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="780.5" dy="0">Executor</tspan></text></g><defs><marker id="arrowhead" refX="9" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><defs><marker id="filled-head" refX="18" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker id="sequencenumber" refX="15" refY="15" markerWidth="60" markerHeight="40" orient="auto"><circle cx="15" cy="15" r="6"></circle></marker></defs><text x="275" y="105" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Request assignment for pending job</text><line x1="443.5" y1="138" x2="105.5" y2="138" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="275" y="198" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Send job payload</text><line x1="105.5" y1="231" x2="443.5" y2="231" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><g><rect x="438.5" y="231" fill="#EDF2AE" stroke="#666" width="10" height="286" rx="0" ry="0" class="activation0"></rect></g><text x="615" y="246" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Execute container with job payload</text><line x1="448.5" y1="279" x2="780.5" y2="279" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><rect x="775.5" y="281" fill="#EDF2AE" stroke="#666" width="10" height="188" rx="0" ry="0" class="activation0"></rect></g><text x="441" y="294" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Clone repository</text><line x1="775.5" y1="327" x2="105.5" y2="327" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="441" y="342" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Download artifacts</text><line x1="775.5" y1="375" x2="105.5" y2="375" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><rect x="80.5" y="385" fill="#EDF2AE" stroke="#666" width="725" height="36" rx="0" ry="0" class="note"></rect><text x="443" y="390" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 14px; font-weight: 400;"><tspan x="443">Constantly update running status</tspan></text></g><text x="612" y="436" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Result of executed job</text><line x1="775.5" y1="469" x2="448.5" y2="469" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="272" y="484" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Result of executed job</text><line x1="438.5" y1="517" x2="105.5" y2="517" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><g><line x1="70.5" y1="148" x2="815.5" y2="148" class="loopLine"></line><line x1="815.5" y1="148" x2="815.5" y2="527" class="loopLine"></line><line x1="70.5" y1="527" x2="815.5" y2="527" class="loopLine"></line><line x1="70.5" y1="148" x2="70.5" y2="527" class="loopLine"></line><polygon points="70.5,148 120.5,148 120.5,161 112.1,168 70.5,168" class="labelBox"></polygon><text x="96" y="161" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="labelText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">alt</text><text x="468" y="166" text-anchor="middle" class="loopText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;"><tspan x="468">[if pending job exists]</tspan></text></g><g><line x1="60.5" y1="75" x2="825.5" y2="75" class="loopLine"></line><line x1="825.5" y1="75" x2="825.5" y2="537" class="loopLine"></line><line x1="60.5" y1="537" x2="825.5" y2="537" class="loopLine"></line><line x1="60.5" y1="75" x2="60.5" y2="537" class="loopLine"></line><polygon points="60.5,75 110.5,75 110.5,88 102.1,95 60.5,95" class="labelBox"></polygon><text x="86" y="88" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="labelText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">loop</text><text x="468" y="93" text-anchor="middle" class="loopText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;"><tspan x="468"></tspan></text></g><g><rect x="0" y="557" fill="#eaeaea" stroke="#666" width="211" height="65" rx="3" ry="3" class="actor"></rect><text x="105.5" y="589.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="105.5" dy="0">GitLab (csed332.postech.ac.kr)</tspan></text></g><g><rect x="368.5" y="557" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="443.5" y="589.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="443.5" dy="0">GitLab Runner</tspan></text></g><g><rect x="705.5" y="557" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="780.5" y="589.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="780.5" dy="0">Executor</tspan></text></g></svg></pre><p><span>We installed GitLab Runner on a remote server to introduce CI to our project. Our GitLab Runner, registered to our project on the GitLab server, continuously queries whether there are pending jobs for the project. If there is a pending job, it runs the docker container in terms of the project’s configuration. After execution, the runner delivers the results of each pipeline to the GitLab server. Finally, we can see the results of CI via browsers.</span></p><h4 id="322-Automated-Test" data-id="322-Automated-Test"><a class="anchor hidden-xs" href="#322-Automated-Test" title="322-Automated-Test"><span class="octicon octicon-link"></span></a><span>3.2.2. Automated Test</span></h4><pre><code class="yaml hljs"><span class="token key atrule">test</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ./gradlew check jacocoTestReport
</code></pre><p><span>Automating test execution is essential for successful integration. It is a crucial factor in Extreme Programming to make the latest source code always work correctly. Various factors can ruin the code, such as a merge conflict or incorrect implementation. To guarantee the homeostasis of the code despite multiple factors and diverse situations, we introduced CI to the project. Our CI automatically performs unit tests for each pushed code and written merge request. More specifically, our CI runs </span><code>gradle check jacocoTestReport</code><span> on the pushed code with gradle wrapper. It determines whether the test passes or not. Our CI helps Extreme Programming by ensuring that the code in the repository always runs correctly.</span></p><h4 id="323-Deploy-Artifact" data-id="323-Deploy-Artifact"><a class="anchor hidden-xs" href="#323-Deploy-Artifact" title="323-Deploy-Artifact"><span class="octicon octicon-link"></span></a><span>3.2.3. Deploy Artifact</span></h4><pre><code class="yaml hljs"><span class="token key atrule">test</span><span class="token punctuation">:</span>
  <span class="token comment"># ...</span>
  <span class="token key atrule">artifacts</span><span class="token punctuation">:</span>
    <span class="token key atrule">when</span><span class="token punctuation">:</span> always
    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> team2_project/build/reports/jacoco/test/jacocoTestReport.xml
    <span class="token key atrule">reports</span><span class="token punctuation">:</span>
      <span class="token key atrule">junit</span><span class="token punctuation">:</span> team2_project/build/test<span class="token punctuation">-</span>results/test/<span class="token important">**/TEST-*.xml</span>
</code></pre><p><span>Our CI automatically performs tests, but this doesn’t mean our code always passes the tests. In other words, there is always a risk that the test will fail. When a test fails, developers should be able to see why the test failed. For this, CI deploys results as artifacts. CI saves </span><code>jacocoTestReport.xml</code><span> and </span><code>TEST-*.xml</code><span> in the test stage and deploys them as artifacts. In addition, since GitLab parses the JUnit test result, developers can view the test result more conveniently with browsers.</span></p><h4 id="324-Visualize-Artifact" data-id="324-Visualize-Artifact"><a class="anchor hidden-xs" href="#324-Visualize-Artifact" title="324-Visualize-Artifact"><span class="octicon octicon-link"></span></a><span>3.2.4. Visualize Artifact</span></h4><p><img src="https://hackmd.io/_uploads/HkjzA4Y9K.png" alt="" loading="lazy"></p><pre><code class="yaml hljs"><span class="token key atrule">coverage</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> visualize
  <span class="token key atrule">image</span><span class="token punctuation">:</span> registry.gitlab.com/haynes/jacoco2cobertura<span class="token punctuation">:</span>1.0.7
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> python /opt/cover2cover.py build/reports/jacoco/test/jacocoTestReport.xml $CI_PROJECT_DIR/team2_project/src/main/java/ <span class="token punctuation">&gt;</span> build/cobertura.xml
  <span class="token key atrule">needs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"test"</span><span class="token punctuation">]</span>
  <span class="token key atrule">artifacts</span><span class="token punctuation">:</span>
    <span class="token key atrule">reports</span><span class="token punctuation">:</span>
      <span class="token key atrule">cobertura</span><span class="token punctuation">:</span> team2_project/build/cobertura.xml

</code></pre><p><span>To provide richer information about each Merge Request, our CI includes the ability to visualize code coverage. Visualize stage in our CI uses the </span><code>jacocoTestReport</code><span> artifact created in the test stage. In this stage, CI runs Cobertura, which uses </span><code>jacocoTestReport</code><span> as its input. After it runs, GitLab parses reports generated through Cobertura. Thanks to GitLab, developers can see whether their code is covered or not in the “Changes” tab of each Merge Request.</span></p><h3 id="33-Automated-Test" data-id="33-Automated-Test"><a class="anchor hidden-xs" href="#33-Automated-Test" title="33-Automated-Test"><span class="octicon octicon-link"></span></a><span>3.3. Automated Test</span></h3><h4 id="331-Database" data-id="331-Database"><a class="anchor hidden-xs" href="#331-Database" title="331-Database"><span class="octicon octicon-link"></span></a><span>3.3.1. Database</span></h4><h5 id="MetricServiceTest" data-id="MetricServiceTest"><a class="anchor hidden-xs" href="#MetricServiceTest" title="MetricServiceTest"><span class="octicon octicon-link"></span></a><span>MetricServiceTest</span></h5><p><span>Unlike other tests, we implemented several helper methods to handle data in database for tests.</span></p><pre><code class="java hljs"><span class="token keyword">static</span> <span class="token punctuation">{</span>
    metricModelList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    calcHistoryModelList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@AfterEach</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">CalcHistoryModel</span> c <span class="token operator">:</span> calcHistoryModelList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            session<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        session<span class="token punctuation">.</span><span class="token function">getTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    metricModelList<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    calcHistoryModelList<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p><span>Like above, the data created during the test is removed after the test. So database remains consistent regardless of testing.</span></p><pre><code class="java hljs"><span class="token keyword">private</span> <span class="token class-name">CalcHistoryModel</span> <span class="token function">generateCalcHistoryModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">CalcHistoryModel</span> c <span class="token operator">=</span> <span class="token class-name">MetricService</span><span class="token punctuation">.</span><span class="token function">generateCalcHistoryModel</span><span class="token punctuation">(</span>UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    calcHistoryModelList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token class-name">MetricModel</span> <span class="token function">generateMetricModel</span><span class="token punctuation">(</span><span class="token class-name">CalcHistoryModel</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">MetricModel</span> m <span class="token operator">=</span> <span class="token class-name">MetricService</span><span class="token punctuation">.</span><span class="token function">addMetric</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">getMetric</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    metricModelList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> m<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p><span>There are also generator methods for </span><code>MetricModel</code><span> and </span><code>CalcHistoryModel</code><span>. Some of them uses </span><code>UUID</code><span> for creating arbitrary name like above.</span></p><pre><code class="java hljs"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testGenerateCalcHistoryModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">CalcHistoryModel</span> c <span class="token operator">=</span> <span class="token function">generateCalcHistoryModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertNotNull</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testAddMetric</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">CalcHistoryModel</span> c <span class="token operator">=</span> <span class="token function">generateCalcHistoryModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">MetricModel</span> m <span class="token operator">=</span> <span class="token function">generateMetricModel</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertNotNull</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p><span>Test code for database checks four main functionalities of </span><code>MetricService</code><span>, explained in </span><em><span>2.1.2 Service</span></em><span>. On </span><code>testAddMetric()</code><span>, we only checked whether the add method worked without any error and returned safely. We check whether it really added the data correctly to database on </span><code>testGetMetric()</code><span> and </span><code>testCompareMetrics()</code><span>.</span></p><h4 id="332-Metric" data-id="332-Metric"><a class="anchor hidden-xs" href="#332-Metric" title="332-Metric"><span class="octicon octicon-link"></span></a><span>3.3.2. Metric</span></h4><h5 id="CodeLineMetricTest" data-id="CodeLineMetricTest"><a class="anchor hidden-xs" href="#CodeLineMetricTest" title="CodeLineMetricTest"><span class="octicon octicon-link"></span></a><span>CodeLineMetricTest</span></h5><pre><code class="java hljs"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testProjectCodeLineMetricCalculateNoPackages</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> projectCodeLineMetric<span class="token punctuation">.</span><span class="token function">calculate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
    
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testClassCodeLineMetricCalculate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDBConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><p><span>This test class is for </span><code>CodeLineMetric</code><span> class. The first two tests check whether two </span><code>CodeLineMetric</code><span> objects calculate the number of lines of code in a project and a class. </span><code>testDBConnection</code><span> test checks if a </span><code>CodeLineMetric</code><span> object sends the data in the form as we expected. This test also checks if the </span><code>set()</code><span> method, which is responsible for setting the value of a field named </span><code>codeLine</code><span>, works correctly.</span></p><h5 id="CyclomaticTest" data-id="CyclomaticTest"><a class="anchor hidden-xs" href="#CyclomaticTest" title="CyclomaticTest"><span class="octicon octicon-link"></span></a><span>CyclomaticTest</span></h5><pre><code class="java hljs"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testIFCycloMatic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> metrics<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>methods<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"singleIF"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> metrics<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>methods<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"singleIfElse"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">3.0</span><span class="token punctuation">,</span> metrics<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>methods<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"nestedIF"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">3.0</span><span class="token punctuation">,</span> metrics<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>methods<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"multiElseIf"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
    
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testAssertCycloMatic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
    
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSave</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><p><span>This test class checks if the </span><code>CycloMetric</code><span> class correctly. Most of the test methods checks if a </span><code>CycloMetric</code><span> object correctly calculates the value of a method with several conditional statements. We defined these statement as branch :</span></p><pre><code>- IF / ELSE-IF
- For / ForEach
- Switch-case (except default)
- Try-catch
- Assert 
- While/do-while
- conditional operator (tenary operator)
</code></pre><p><span>It is because cyclomatic complexity depends on the number of branches in a method. The </span><code>testSave()</code><span> test checks if the </span><code>save()</code><span> method in a </span><code>CycloMetric</code><span> object saves the value to database in the way we intended.</span></p><p><span>we created testcase not only check single branch statement but also nested statement or statement combined with other statement such as block, assign, etc.</span></p><h5 id="halstead-package-tests" data-id="halstead-package-tests"><a class="anchor hidden-xs" href="#halstead-package-tests" title="halstead-package-tests"><span class="octicon octicon-link"></span></a><span>halstead package tests</span></h5><h6 id="HalsteadMetricCalculatorTest" data-id="HalsteadMetricCalculatorTest"><a class="anchor hidden-xs" href="#HalsteadMetricCalculatorTest" title="HalsteadMetricCalculatorTest"><span class="octicon octicon-link"></span></a><span>HalsteadMetricCalculatorTest</span></h6><pre><code class="java hljs"><span class="token class-name">HalsteadMetricCalculator</span> halsteadMetricCalculator <span class="token operator">=</span> 
    <span class="token keyword">new</span> <span class="token class-name">HalsteadMetricCalculator</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">calculateVocabulary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> halsteadMetricCalculator<span class="token punctuation">.</span><span class="token function">getVocabulary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">calculateSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> halsteadMetricCalculator<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ...</span>
</code></pre><p><span>This test class checks if the fields in </span><code>HalsteadMetricCalculator</code><span>, such as number of unique(or total) operators and operands, are calculated in the way we intended. These fields are used to calculate halstead complexity in </span><code>HalsteadMetric</code><span> class.</span></p><h6 id="HalsteadParserTest" data-id="HalsteadParserTest"><a class="anchor hidden-xs" href="#HalsteadParserTest" title="HalsteadParserTest"><span class="octicon octicon-link"></span></a><span>HalsteadParserTest</span></h6><pre><code class="java hljs"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">parseMethodOneOperator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    halsteadParser<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>psiMethod<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> halsteadParser<span class="token punctuation">.</span><span class="token function">getHalsteadVisitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getNumberOfTotalOperands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> halsteadParser<span class="token punctuation">.</span><span class="token function">getHalsteadVisitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getNumberOfUniqueOperands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
    
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">parseMethodSimpleAddition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
    
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">parseMethodMainClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><p><span>This test class checks if </span><code>HalsteadParser</code><span> class correctly parses several methods with several kinds of operators and operands. One method has the initialization of two variables. Another has a addition of variables in addition. The other has a method call named </span><code>System.out.println()</code><span>.</span></p><h6 id="HalsteadMetricTest" data-id="HalsteadMetricTest"><a class="anchor hidden-xs" href="#HalsteadMetricTest" title="HalsteadMetricTest"><span class="octicon octicon-link"></span></a><span>HalsteadMetricTest</span></h6><pre><code class="java hljs"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">parseMethodOneOperator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSave</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><p><span>This test class checks if </span><code>HalsteadMetric</code><span> class works correctly. The </span><code>parseMethodOneOperator</code><span> test checks if a </span><code>HalsteadMetric</code><span> object caculates several factors used to cacluate halstead complexity in the way we intended. These factors are vocabulary, difficulty, effort, and volume. The </span><code>testSave()</code><span> method tests saving the data to a database.</span></p><h5 id="BaseMetricDegradationTest" data-id="BaseMetricDegradationTest"><a class="anchor hidden-xs" href="#BaseMetricDegradationTest" title="BaseMetricDegradationTest"><span class="octicon octicon-link"></span></a><span>BaseMetricDegradationTest</span></h5><pre><code class="java hljs"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testGetDegradationMetrics</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    baseMetric<span class="token punctuation">.</span><span class="token function">setMetric</span><span class="token punctuation">(</span><span class="token number">1.5</span><span class="token punctuation">,</span> psiClass<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> psiMethod<span class="token punctuation">)</span><span class="token punctuation">;</span>
    baseMetric<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>calc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    baseMetric<span class="token punctuation">.</span><span class="token function">setMetric</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">,</span> psiClass<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> psiMethod<span class="token punctuation">)</span><span class="token punctuation">;</span>

    degradationMetrics <span class="token operator">=</span> baseMetric<span class="token punctuation">.</span><span class="token function">getDegradedMetrics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span>degradationMetrics<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Set</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>psiClass<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
    
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testGetDegradationMetricsMultiple</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
    
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testGetDegradationMetricsNoWarningOneClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
</code></pre><p><span>This test class is for </span><code>getDegradedMetrics()</code><span> and </span><code>checkDegradation()</code><span> methods in </span><code>BaseMetric</code><span> class. The condition of the </span><code>BaseMetric</code><span> object is set to </span><code>INCREASE</code><span>, which checks if the value increased compared to the prevous value stored in database. Thus, in every test, the </span><code>save()</code><span> method is called exactly once, between the first values and second values. The </span><code>getDegradedMetrics()</code><span> method is tested in various situations, one with a class and a method, the others with multiple classes and methods. The </span><code>checkDegradation()</code><span> method is also tested, given the condition that returned </span><code>Map</code><span> object of </span><code>getDegradedMetrics()</code><span> is empty or not.</span></p><h4 id="333-warning" data-id="333-warning"><a class="anchor hidden-xs" href="#333-warning" title="333-warning"><span class="octicon octicon-link"></span></a><span>3.3.3. warning</span></h4><h5 id="WarningConditionTest" data-id="WarningConditionTest"><a class="anchor hidden-xs" href="#WarningConditionTest" title="WarningConditionTest"><span class="octicon octicon-link"></span></a><span>WarningConditionTest</span></h5><pre><code class="java hljs"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">increasePositiveTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertTrue</span><span class="token punctuation">(</span>w_incr<span class="token punctuation">.</span><span class="token function">shouldWarn</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">increaseNegativeTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertFalse</span><span class="token punctuation">(</span>w_incr<span class="token punctuation">.</span><span class="token function">shouldWarn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertFalse</span><span class="token punctuation">(</span>w_incr<span class="token punctuation">.</span><span class="token function">shouldWarn</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">decreasePositiveTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><p><span>This test code test all four modes of conditions of </span><code>WarningCondition</code><span>. Checks both correct and incorrect input and output. Test name with “teta” tests if </span><code>INCREASE</code><span> condition works well with teta set.</span></p><h4 id="334-Util" data-id="334-Util"><a class="anchor hidden-xs" href="#334-Util" title="334-Util"><span class="octicon octicon-link"></span></a><span>3.3.4. Util</span></h4><h5 id="FixtureHelper" data-id="FixtureHelper"><a class="anchor hidden-xs" href="#FixtureHelper" title="FixtureHelper"><span class="octicon octicon-link"></span></a><span>FixtureHelper</span></h5><pre><code class="java hljs"><span class="token keyword">public</span> <span class="token class-name">PsiFile</span> <span class="token function">getPsiFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> fixture<span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token class-name">PsiClass</span> <span class="token function">getFirstPsiClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">PsiFile</span> psiFile <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getPsiFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">return</span> psiClass<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token class-name">PsiClass</span> <span class="token function">getPsiClass</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token class-name">Name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">PsiFile</span> psiFile <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getPsiFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PsiClass</span> aClass <span class="token operator">:</span> classes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>aClass<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Name</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> aClass<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> classes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p><span>Our project analysis give project code and caculate Metric value. when backend run, they use Psi library for accessing component of project.</span><br>
<span>To automated test, we have to make virtual java file and give the input to test as Project or PsiClass.</span></p><p><span>Therefore, we have used </span><code>codeInstightTestFixture</code><span> for automated test.</span><br>
<span>This class is not test code, but helper class for metric tests by using testFixture. This class allows other tests code to access example code file so that we can calculate metric and check if they work well.</span></p><p><span>In resource directory, there are various target test code for automated test.</span></p><h3 id="34-Manual-Test" data-id="34-Manual-Test"><a class="anchor hidden-xs" href="#34-Manual-Test" title="34-Manual-Test"><span class="octicon octicon-link"></span></a><span>3.4. Manual Test</span></h3><p><span>Our manual test cases follow this format:</span></p><ul>
<li><span>Preconditions</span>
<ul>
<li><span>what the state of the system needs to be before starting the test case</span></li>
</ul>
</li>
<li><span>Steps</span>
<ul>
<li><span>describe how to execute test case in small steps</span></li>
</ul>
</li>
<li><span>Expected Result</span>
<ul>
<li><span>after each step, there is an expected result</span></li>
</ul>
</li>
</ul><p><span>For running manual test cases, consider the system requirements stated in 3.1.</span></p><h4 id="341-Smoke-Test---Plugin-loads-amp-panel-is-displayed" data-id="341-Smoke-Test---Plugin-loads-amp-panel-is-displayed"><a class="anchor hidden-xs" href="#341-Smoke-Test---Plugin-loads-amp-panel-is-displayed" title="341-Smoke-Test---Plugin-loads-amp-panel-is-displayed"><span class="octicon octicon-link"></span></a><span>3.4.1. Smoke Test - Plugin loads &amp; panel is displayed</span></h4><h5 id="Preconditions" data-id="Preconditions"><a class="anchor hidden-xs" href="#Preconditions" title="Preconditions"><span class="octicon octicon-link"></span></a><span>Preconditions:</span></h5><ul>
<li><span>run ‘clean’ of Gradle</span>
<ul>
<li><code>./gradlew clean</code></li>
</ul>
</li>
<li><span>run ‘runIde’ of Gradle</span>
<ul>
<li><code>./gradlew runide</code></li>
</ul>
</li>
</ul><h5 id="Steps" data-id="Steps"><a class="anchor hidden-xs" href="#Steps" title="Steps"><span class="octicon octicon-link"></span></a><span>Steps:</span></h5><ol>
<li><span>open any project</span></li>
<li><span>open plugin panel “Metrics”</span></li>
<li><span>hover over name of metrics</span></li>
</ol><h5 id="Expected-Results" data-id="Expected-Results"><a class="anchor hidden-xs" href="#Expected-Results" title="Expected-Results"><span class="octicon octicon-link"></span></a><span>Expected Results:</span></h5><ol>
<li>
<p><span>plugin panel “Metrics” is visible as in the following screenshot on the right:</span><br>
<img src="https://hackmd.io/_uploads/rkszcJo9K.png" alt="" loading="lazy"></p>
</li>
<li>
<p><span>Toolbar with Buttons is visible; Metric Panels are shown (not necessarily with values)</span><br>
<img src="https://hackmd.io/_uploads/BkE7cys5t.png" alt="" loading="lazy"></p>
</li>
<li>
<p><span>Tooltip shows with description of metrics</span><br>
<img src="https://hackmd.io/_uploads/S1e491ocK.png" alt="" loading="lazy"></p>
</li>
</ol><h4 id="342-Compare-Metrics-amp-Send-Warning" data-id="342-Compare-Metrics-amp-Send-Warning"><a class="anchor hidden-xs" href="#342-Compare-Metrics-amp-Send-Warning" title="342-Compare-Metrics-amp-Send-Warning"><span class="octicon octicon-link"></span></a><span>3.4.2. Compare Metrics &amp; Send Warning</span></h4><h5 id="Preconditions1" data-id="Preconditions"><a class="anchor hidden-xs" href="#Preconditions1" title="Preconditions1"><span class="octicon octicon-link"></span></a><span>Preconditions:</span></h5><ul>
<li><span>run ‘clean’ of Gradle</span>
<ul>
<li><code>./gradlew clean</code></li>
</ul>
</li>
<li><span>run ‘runIde’ of Gradle</span>
<ul>
<li><code>./gradlew runide</code></li>
</ul>
</li>
<li><span>open empty project with one empty class (In a new package)</span></li>
<li><span>open plugin panel “Metrics”</span></li>
</ul><h5 id="Steps1" data-id="Steps"><a class="anchor hidden-xs" href="#Steps1" title="Steps1"><span class="octicon octicon-link"></span></a><span>Steps:</span></h5><ol>
<li><span>Create a new class in a new package</span></li>
<li><span>Push the calculate button</span></li>
<li><span>Add new lines of code to this class (until there is 100 lines in the 4. class, the ending bracket will be at line 101)</span></li>
<li><span>Push the calculate button</span></li>
</ol><h5 id="Expected-Results1" data-id="Expected-Results"><a class="anchor hidden-xs" href="#Expected-Results1" title="Expected-Results1"><span class="octicon octicon-link"></span></a><span>Expected Results:</span></h5><ol>
<li>
<p><span>After the first calculation (step 2), the total number of line displayed should be 2.</span><br>
<img src="https://hackmd.io/_uploads/Hys3rMj9F.png" alt="" loading="lazy"></p>
</li>
<li>
<p><span>After the second calculation (step 4), the total number of line displayed should be 100. Moreover the title of the total code line should switch from no warning to indicating that the metric has worsen (yellow title, warning sign)</span><br>
<img src="https://hackmd.io/_uploads/ry_pBMj5F.png" alt="" loading="lazy"></p>
</li>
</ol><h4 id="343-Calcluate-Halstead-Metric-amp-Cyclomatic-Metric" data-id="343-Calcluate-Halstead-Metric-amp-Cyclomatic-Metric"><a class="anchor hidden-xs" href="#343-Calcluate-Halstead-Metric-amp-Cyclomatic-Metric" title="343-Calcluate-Halstead-Metric-amp-Cyclomatic-Metric"><span class="octicon octicon-link"></span></a><span>3.4.3. Calcluate Halstead Metric &amp; Cyclomatic Metric</span></h4><h5 id="Preconditions2" data-id="Preconditions"><a class="anchor hidden-xs" href="#Preconditions2" title="Preconditions2"><span class="octicon octicon-link"></span></a><span>Preconditions:</span></h5><ul>
<li><span>run ‘clean’ of Gradle</span>
<ul>
<li><code>./gradlew clean</code></li>
</ul>
</li>
<li><span>run ‘runIde’ of Gradle</span>
<ul>
<li><code>./gradlew runide</code></li>
</ul>
</li>
<li><span>open any, non-empty and not too heavy project</span></li>
</ul><h5 id="Steps2" data-id="Steps"><a class="anchor hidden-xs" href="#Steps2" title="Steps2"><span class="octicon octicon-link"></span></a><span>Steps:</span></h5><ol>
<li><span>open plugin panel “Metrics”</span></li>
<li><span>click button “calculate metrics”</span></li>
</ol><h5 id="Expected-Results2" data-id="Expected-Results"><a class="anchor hidden-xs" href="#Expected-Results2" title="Expected-Results2"><span class="octicon octicon-link"></span></a><span>Expected Results:</span></h5><ol>
<li><span>panel opens and shows section for lines of code, halstead metrics &amp; cyclomatic complexity</span></li>
<li><span>All metrics are calculated (halstead metrics &amp; cyclomatic complexity is displayed per class and method)</span><br>
<img src="https://hackmd.io/_uploads/BkojUzscK.png" alt="" loading="lazy"></li>
</ol><h4 id="344-Warning-On-Cyclomatic-Metric" data-id="344-Warning-On-Cyclomatic-Metric"><a class="anchor hidden-xs" href="#344-Warning-On-Cyclomatic-Metric" title="344-Warning-On-Cyclomatic-Metric"><span class="octicon octicon-link"></span></a><span>3.4.4. Warning On Cyclomatic Metric</span></h4><h5 id="Preconditions3" data-id="Preconditions"><a class="anchor hidden-xs" href="#Preconditions3" title="Preconditions3"><span class="octicon octicon-link"></span></a><span>Preconditions:</span></h5><ul>
<li><span>run ‘clean’ of Gradle</span>
<ul>
<li><code>./gradlew clean</code></li>
</ul>
</li>
<li><span>run ‘runIde’ of Gradle</span>
<ul>
<li><code>./gradlew runide</code></li>
</ul>
</li>
<li><span>open empty project with one empty class (in a new package)</span></li>
<li><span>open plugin panel “Metrics”</span></li>
</ul><h5 id="Steps3" data-id="Steps"><a class="anchor hidden-xs" href="#Steps3" title="Steps3"><span class="octicon octicon-link"></span></a><span>Steps:</span></h5><ol>
<li><span>Add this method to the class.</span></li>
</ol><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span></span>
<span></span>
<span></span></div><div class="code"><span class="token keyword">int</span> <span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</div></div></code></pre><ol start="2">
<li><span>Push the ‘calculate Metrics’ button,</span></li>
<li><span>Add 15 successive condition statements </span><code>if (a==2);</code><span> in the method.</span></li>
<li><span>Push the ‘calculate Metrics’ button</span></li>
</ol><h5 id="Expected-Result" data-id="Expected-Result"><a class="anchor hidden-xs" href="#Expected-Result" title="Expected-Result"><span class="octicon octicon-link"></span></a><span>Expected Result:</span></h5><ol>
<li>
<p><span>After 2, one entry should exists for the Cyclometric Metric. It’s value should be of 1.0. It should be written in white. See image.</span><br>
<img src="https://hackmd.io/_uploads/H1U7Pfj9K.png" alt="" loading="lazy"></p>
</li>
<li>
<p><span>After 4. one entry should exists for the Cyclometric Metric. It’s value should be 16.0. It should be written in yellow font. See image.</span><br>
<img src="https://hackmd.io/_uploads/B1WVPzo9t.png" alt="" loading="lazy"></p>
</li>
</ol><h4 id="345-Warning-on-Halstead-Metric" data-id="345-Warning-on-Halstead-Metric"><a class="anchor hidden-xs" href="#345-Warning-on-Halstead-Metric" title="345-Warning-on-Halstead-Metric"><span class="octicon octicon-link"></span></a><span>3.4.5. Warning on Halstead Metric</span></h4><h5 id="Preconditions4" data-id="Preconditions"><a class="anchor hidden-xs" href="#Preconditions4" title="Preconditions4"><span class="octicon octicon-link"></span></a><span>Preconditions:</span></h5><ul>
<li><span>run ‘clean’ of Gradle</span>
<ul>
<li><code>./gradlew clean</code></li>
</ul>
</li>
<li><span>run ‘runIde’ of Gradle</span>
<ul>
<li><code>./gradlew runide</code></li>
</ul>
</li>
<li><span>open empty project with one empty class (in a new package)</span></li>
<li><span>open plugin panel “Metrics”</span></li>
</ul><h5 id="Steps4" data-id="Steps"><a class="anchor hidden-xs" href="#Steps4" title="Steps4"><span class="octicon octicon-link"></span></a><span>Steps:</span></h5><ol>
<li><span>Create a method ‘m’.</span></li>
<li><span>Push the ‘calculate Metrics’ button,</span></li>
<li><span>Replace the ‘m’ method by the following code. Import classes if needed.</span></li>
</ol><pre><code class="java hljs">    <span class="token keyword">void</span> <span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Scanner</span> scan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"What is the answer?"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> answer <span class="token operator">=</span> scan<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>answer <span class="token operator">==</span> <span class="token number">42</span><span class="token punctuation">)</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"You are right!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"You are wrong!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><ol start="4">
<li><span>Push the ‘calculate Metrics’ button</span></li>
</ol><h4 id="Expected-Result1" data-id="Expected-Result"><a class="anchor hidden-xs" href="#Expected-Result1" title="Expected-Result1"><span class="octicon octicon-link"></span></a><span>Expected Result:</span></h4><ol>
<li>
<p><span>After 2, one entry should exists for the Halstread Metric.The values should be identical to the ones in the image. It should be written in white. See image.</span><br>
<img src="https://hackmd.io/_uploads/rJqVpGjqK.png" alt="" loading="lazy"></p>
</li>
<li>
<p><span>After 4. one entry should exists for the Halstread Metric.The values should be identical to the ones in the image. The difficulty and effort of that entry should be written in yellow font. See image.</span><br>
<img src="https://hackmd.io/_uploads/rylHpGo5Y.png" alt="" loading="lazy"></p>
</li>
</ol></div>
    <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
                <div class="toc"><ul class="nav">
<li><a href="#Warning-Plugin-for-Degradation-of-Software-Metrics" title="Warning Plugin for Degradation of Software Metrics">Warning Plugin for Degradation of Software Metrics</a><ul class="nav">
<li><a href="#1-Description" title="1. Description">1. Description</a><ul class="nav">
<li><a href="#11-Goal" title="1.1. Goal">1.1. Goal</a></li>
<li><a href="#12-Problem-and-Solution" title="1.2. Problem and Solution">1.2. Problem and Solution</a></li>
</ul>
</li>
<li><a href="#2-Architecture-and-Design" title="2. Architecture and Design">2. Architecture and Design</a><ul class="nav">
<li><a href="#21-Database" title="2.1. Database">2.1. Database</a></li>
<li><a href="#22-Metric" title="2.2. Metric">2.2. Metric</a></li>
<li><a href="#23-GUI" title="2.3. GUI">2.3. GUI</a></li>
</ul>
</li>
<li><a href="#3-Appendix" title="3. Appendix">3. Appendix</a><ul class="nav">
<li><a href="#31-Environment" title="3.1. Environment">3.1. Environment</a></li>
<li><a href="#32-CI" title="3.2. CI">3.2. CI</a></li>
<li><a href="#33-Automated-Test" title="3.3. Automated Test">3.3. Automated Test</a></li>
<li><a href="#34-Manual-Test" title="3.4. Manual Test">3.4. Manual Test</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
            </ul>
        </div>
    </div>
    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="top:17px;display:none;" null null>
        <div class="toc"><ul class="nav">
<li><a href="#Warning-Plugin-for-Degradation-of-Software-Metrics" title="Warning Plugin for Degradation of Software Metrics">Warning Plugin for Degradation of Software Metrics</a><ul class="nav">
<li><a href="#1-Description" title="1. Description">1. Description</a><ul class="nav">
<li><a href="#11-Goal" title="1.1. Goal">1.1. Goal</a></li>
<li><a href="#12-Problem-and-Solution" title="1.2. Problem and Solution">1.2. Problem and Solution</a></li>
</ul>
</li>
<li><a href="#2-Architecture-and-Design" title="2. Architecture and Design">2. Architecture and Design</a><ul class="nav">
<li><a href="#21-Database" title="2.1. Database">2.1. Database</a></li>
<li><a href="#22-Metric" title="2.2. Metric">2.2. Metric</a></li>
<li><a href="#23-GUI" title="2.3. GUI">2.3. GUI</a></li>
</ul>
</li>
<li><a href="#3-Appendix" title="3. Appendix">3. Appendix</a><ul class="nav">
<li><a href="#31-Environment" title="3.1. Environment">3.1. Environment</a></li>
<li><a href="#32-CI" title="3.2. CI">3.2. CI</a></li>
<li><a href="#33-Automated-Test" title="3.3. Automated Test">3.3. Automated Test</a></li>
<li><a href="#34-Manual-Test" title="3.4. Manual Test">3.4. Manual Test</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.6.0/gist-embed.min.js" integrity="sha256-KyF2D6xPIJUW5sUDSs93vWyZm+1RzIpKCexxElmxl8g=" crossorigin="anonymous" defer></script>
    <script>
        var markdown = $(".markdown-body");
        //smooth all hash trigger scrolling
        function smoothHashScroll() {
            var hashElements = $("a[href^='#']").toArray();
            for (var i = 0; i < hashElements.length; i++) {
                var element = hashElements[i];
                var $element = $(element);
                var hash = element.hash;
                if (hash) {
                    $element.on('click', function (e) {
                        // store hash
                        var hash = this.hash;
                        if ($(hash).length <= 0) return;
                        // prevent default anchor click behavior
                        e.preventDefault();
                        // animate
                        $('body, html').stop(true, true).animate({
                            scrollTop: $(hash).offset().top
                        }, 100, "linear", function () {
                            // when done, add hash to url
                            // (default click behaviour)
                            window.location.hash = hash;
                        });
                    });
                }
            }
        }

        smoothHashScroll();
        var toc = $('.ui-toc');
        var tocAffix = $('.ui-affix-toc');
        var tocDropdown = $('.ui-toc-dropdown');
        //toc
        tocDropdown.click(function (e) {
            e.stopPropagation();
        });

        var enoughForAffixToc = true;

        function generateScrollspy() {
            $(document.body).scrollspy({
                target: ''
            });
            $(document.body).scrollspy('refresh');
            if (enoughForAffixToc) {
                toc.hide();
                tocAffix.show();
            } else {
                tocAffix.hide();
                toc.show();
            }
            $(document.body).scroll();
        }

        function windowResize() {
            //toc right
            var paddingRight = parseFloat(markdown.css('padding-right'));
            var right = ($(window).width() - (markdown.offset().left + markdown.outerWidth() - paddingRight));
            toc.css('right', right + 'px');
            //affix toc left
            var newbool;
            var rightMargin = (markdown.parent().outerWidth() - markdown.outerWidth()) / 2;
            //for ipad or wider device
            if (rightMargin >= 133) {
                newbool = true;
                var affixLeftMargin = (tocAffix.outerWidth() - tocAffix.width()) / 2;
                var left = markdown.offset().left + markdown.outerWidth() - affixLeftMargin;
                tocAffix.css('left', left + 'px');
            } else {
                newbool = false;
            }
            if (newbool != enoughForAffixToc) {
                enoughForAffixToc = newbool;
                generateScrollspy();
            }
        }
        $(window).resize(function () {
            windowResize();
        });
        $(document).ready(function () {
            windowResize();
            generateScrollspy();
        });

        //remove hash
        function removeHash() {
            window.location.hash = '';
        }

        var backtotop = $('.back-to-top');
        var gotobottom = $('.go-to-bottom');

        backtotop.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToTop)
                scrollToTop();
            removeHash();
        });
        gotobottom.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToBottom)
                scrollToBottom();
            removeHash();
        });

        var toggle = $('.expand-toggle');
        var tocExpand = false;

        checkExpandToggle();
        toggle.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            tocExpand = !tocExpand;
            checkExpandToggle();
        })

        function checkExpandToggle () {
            var toc = $('.ui-toc-dropdown .toc');
            var toggle = $('.expand-toggle');
            if (!tocExpand) {
                toc.removeClass('expand');
                toggle.text('Expand all');
            } else {
                toc.addClass('expand');
                toggle.text('Collapse all');
            }
        }

        function scrollToTop() {
            $('body, html').stop(true, true).animate({
                scrollTop: 0
            }, 100, "linear");
        }

        function scrollToBottom() {
            $('body, html').stop(true, true).animate({
                scrollTop: $(document.body)[0].scrollHeight
            }, 100, "linear");
        }
    </script>
</body>

</html>
